<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to `vjsim` • vjsim</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to `vjsim`">
<meta property="og:description" content="vjsim">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">vjsim</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/introduction-vjsim.html">Introduction to vjsim</a>
    </li>
    <li>
      <a href="../articles/simulation-vjsim.html">Simulation basic</a>
    </li>
    <li>
      <a href="../articles/profiling-vjsim.html">Profiling in vjsim</a>
    </li>
    <li>
      <a href="../articles/optimization-vjsim.html">Optimization with vjsim</a>
    </li>
    <li>
      <a href="../articles/exploring-vjsim.html">Exploring with vjsim</a>
    </li>
    <li>
      <a href="../articles/modeling-vjsim.html">Modeling with vjsim</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mladenjovanovic/vjsim/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="introduction-vjsim_files/header-attrs-2.1/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction to <code>vjsim</code>
</h1>
                        <h4 class="author">Mladen Jovanović</h4>
            
            <h4 class="date">2020-04-25</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/mladenjovanovic/vjsim/blob/master/vignettes/introduction-vjsim.Rmd"><code>vignettes/introduction-vjsim.Rmd</code></a></small>
      <div class="hidden name"><code>introduction-vjsim.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p><code>vjsim</code> is R package that simulates vertical jump with the aim of teaching basic biomechanical principles, FV profiling, and exploring assumptions of FV optimization models.</p>
<p>A vertical jump can be done in multiple ways. One way is to quickly dip down and then rebound as high as possible. This vertical jump contains <em>counter-movement action</em>, which increases vertical jump height due to various mechanisms (which are not in our interest for this simulation). Another way involves squatting down, holding the squat position for a second or two, and then exploding upward without any dip. This can be considered purely <em>concentric</em> (or static) jump, and it is usually termed <em>squat jump</em> to be differentiated from the jump. The hands are typically held at the hip, without allowing any swinging action. In <code>vjsim</code> only the squat jump is simulated and analyzed. Thus, when I refer to vertical jump, I refer to a static squat jump with arms continuously held at the hips.</p>
<p>In <code>vjsim</code>, the vertical jump is represented with a simple mechanical model (see Figure).</p>
<div class="figure" style="text-align: center">
<img src="mechanical-model.png" alt="Mechanical model that is used to represent vertical jump" width="90%"><p class="caption">
Mechanical model that is used to represent vertical jump
</p>
</div>
<p>The athlete is represented as a simple moving object that needs to be propelled over <strong>push-off distance</strong> (<span class="math inline">\(d_{po}\)</span>measured in meters; usually around 0.4m for human subjects) by the action of the <strong>Force Generator</strong>. Moving object has a <strong>mass</strong> (or <em>inertia</em>) (<span class="math inline">\(m\)</span>, measured using kilograms (kg)) and <strong>weight</strong> (<span class="math inline">\(w\)</span>; measured in Newtons (N)). Weight is calculated by multiplying mass with the gravity constant, that is equal to 9.81 for the planet Earth:</p>
<p><span class="math display">\[w = m \times 9.81(N)\]</span></p>
<p>If the external load, e.g. barbell, is carried, the mass of the object is equal to athlete bodyweight plus the external load (mass). For example, if the athlete weights 75kg and takes 100kg on his shoulder, the total mass is equal to 175kg, and weight is equal to <span class="math inline">\(175 \times 9.81\)</span> or 1,717N.</p>
<p>Vertical jump height (<span class="math inline">\(h\)</span>; measured in meters (m)) can be calculated with a simple ballistic equation from the known <strong>take-off velocity</strong> (<span class="math inline">\(v_{to}\)</span>; measured in meters per second (m/s)):</p>
<p><span class="math display">\[
h = \frac{v_{to}^2}{2\times9.81}(m)
\]</span></p>
<p>In the vertical jump (i.e. static/concentric squat jump), the initial velocity is assumed to be 0m/s. Jump angle is expected to be 90degrees, and of course, gravity constant is 9.81<span class="math inline">\(m/s^2\)</span> (since we are interested in jumps on Earth, duh).</p>
<p>For example, if take-off velocity is equal to 3m/s, the calculated height reached is equal to:</p>
<p><span class="math display">\[
h = \frac{v_{to}^2}{2\times9.81}(m)
\]</span></p>
<p><span class="math display">\[
h = \frac{3^2}{19.62}(m)
\]</span> <span class="math display">\[
h = \frac{9}{19.62}(m)
\]</span> <span class="math display">\[
h = 0.46(m)
\]</span></p>
<p>Please note that the bodyweight (or the object mass) doesn’t influence the height reached. What bodyweight influences, though, is the take-off velocity reached given characteristics of the Force Generator.</p>
</div>
<div id="force-generator" class="section level1">
<h1 class="hasAnchor">
<a href="#force-generator" class="anchor"></a>Force Generator</h1>
<p>Force Generator is believed to be some <em>entity</em> in the lower body with distinct characteristics. In <code>vjsim</code>, these characteristics are: (1) force-length, (2) force-time, and (3) force-velocity characteristics (see Figure).</p>
<div class="figure" style="text-align: center">
<img src="force-generator-components.png" alt="Force Generator characteristics" width="90%"><p class="caption">
Force Generator characteristics
</p>
</div>
<div id="force-length-characteristic" class="section level2">
<h2 class="hasAnchor">
<a href="#force-length-characteristic" class="anchor"></a>Force-Length Characteristic</h2>
<p>The main characteristic of the Force Generator is the ability to produce force. Thus the main parameter of the Force Generator is the <strong>max force</strong> (<span class="math inline">\(F_{max}\)</span>), or the maximal force that Force Generator is capable of producing.</p>
<p>Unfortunately, Force Generator cannot express 100% of the maximal force across the whole push-off distance. Assuming <em>isometric</em> conditions (i.e. we move the Force Generator at a particular position alongside push-off distance and hold it <em>firmly</em> there), at a particular point in the push-off distance, Force Generator can express certain <strong>force percentage</strong> of the max force. The shape of this relationship (i.e. force percentage ~ distance) represents the Force-Length characteristic of the Force Generator.</p>
<p>The following code and Figure contains few examples how this relationship is modeled in <code>vjsim</code> using the <code><a href="../reference/fgen_get_force_percentage.html">vjsim::fgen_get_force_percentage</a></code><a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> function. Force-Length characteristic implemented in the <code>vjsim</code> depends on two parameters: <strong>decline rate</strong> (<code>decline_rate</code>) and <strong>peak location</strong> (<code>peak_location</code>). Decline rate indicate the rate at which the force percentage drops before peak location. Peak location is a point in the push-off distance calculated using the take-off point as a reference. For example, if push-off distance is 0.4m, the default peak location is -0.15 x push-off distance, or in this case -0.06m from the take-off (or at 0.36m from the start of the movement). Peak location is represented using take-off point as a frame of reference rather than the start of the movement (i.e. d=0), because we want to be able to able to simulate effects of taking a deeper jumping position on the jump performance. And besides, take-off position represents biomechanically sound reference point since it represents standing position.</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="co"># Install vjsim if you haven't already by running the following commands</span>
<span class="co"># install.packages("devtools")</span>
<span class="co"># devtools::install_github("mladenjovanovic/vjsim")</span>

<span class="co"># Install tidyverse and cowplot packages</span>
<span class="co"># install.packages(c("tidyverse", "cowplot"), dependencies = TRUE)</span>

<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">vjsim</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">tidyverse</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">cowplot</span>)</pre></body></html></div>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="no">parameters</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html">expand.grid</a></span>(
  <span class="kw">current_distance</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="fl">0</span>, <span class="fl">0.55</span>, <span class="kw">length.out</span> <span class="kw">=</span> <span class="fl">1000</span>),
  <span class="kw">push_off_distance</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.3</span>, <span class="fl">0.4</span>, <span class="fl">0.5</span>),
  <span class="kw">decline_rate</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.8</span>, <span class="fl">1.5</span>, <span class="fl">2</span>),
  <span class="kw">peak_location</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(-<span class="fl">0.05</span>, -<span class="fl">0.1</span>, -<span class="fl">0.15</span>)
)

<span class="no">force_length</span> <span class="kw">&lt;-</span> <span class="no">parameters</span> <span class="kw">%&gt;%</span>
  <span class="fu">mutate</span>(
    <span class="kw">force_perc</span> <span class="kw">=</span> <span class="kw pkg">vjsim</span><span class="kw ns">::</span><span class="fu"><a href="../reference/fgen_get_force_percentage.html">fgen_get_force_percentage</a></span>(
      <span class="kw">current_distance</span> <span class="kw">=</span> <span class="no">current_distance</span>,
      <span class="kw">push_off_distance</span> <span class="kw">=</span> <span class="no">push_off_distance</span>,
      <span class="kw">decline_rate</span> <span class="kw">=</span> <span class="no">decline_rate</span>,
      <span class="kw">peak_location</span> <span class="kw">=</span> <span class="no">peak_location</span>
    ),
    <span class="kw">decline_rate_label</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span>(<span class="st">"Decline rate = "</span>, <span class="no">decline_rate</span>)),
    <span class="kw">peak_location_label</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span>(<span class="st">"Peak location = "</span>, <span class="no">peak_location</span>)),
    <span class="kw">distance_to_take_off</span> <span class="kw">=</span> <span class="no">current_distance</span> - <span class="no">push_off_distance</span>
  )

<span class="fu">ggplot</span>(
  <span class="no">force_length</span>,
  <span class="fu">aes</span>(
    <span class="kw">x</span> <span class="kw">=</span> <span class="no">current_distance</span>,
    <span class="kw">y</span> <span class="kw">=</span> <span class="no">force_perc</span>,
    <span class="kw">group</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="no">push_off_distance</span>),
    <span class="kw">color</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="no">push_off_distance</span>)
  )
) +
  <span class="fu"><a href="https://rdrr.io/pkg/cowplot/man/theme_cowplot.html">theme_cowplot</a></span>(<span class="fl">8</span>) +
  <span class="fu">geom_line</span>() +
  <span class="fu">facet_grid</span>(<span class="no">decline_rate_label</span> ~ <span class="no">peak_location_label</span>) +
  <span class="fu">xlab</span>(<span class="st">"Distance (m)"</span>) +
  <span class="fu">ylab</span>(<span class="st">"Force percentage"</span>) +
  <span class="fu">labs</span>(<span class="kw">color</span> <span class="kw">=</span> <span class="st">"Push-off distance"</span>)</pre></body></html></div>
<div class="figure" style="text-align: center">
<img src="introduction-vjsim_files/figure-html/force-length-characteristic-1.png" alt="Force-Length characteristic" width="90%"><p class="caption">
Force-Length characteristic
</p>
</div>
<p>The above figure uses start of the push-off as a frame of reference (i.e. d=0). Better visual for comparing different force-length characteristics would be to use take-off as a frame of reference:</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="fu">ggplot</span>(
  <span class="no">force_length</span>,
  <span class="fu">aes</span>(
    <span class="kw">x</span> <span class="kw">=</span> <span class="no">distance_to_take_off</span>,
    <span class="kw">y</span> <span class="kw">=</span> <span class="no">force_perc</span>,
    <span class="kw">group</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="no">push_off_distance</span>),
    <span class="kw">color</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="no">push_off_distance</span>)
  )
) +
  <span class="fu"><a href="https://rdrr.io/pkg/cowplot/man/theme_cowplot.html">theme_cowplot</a></span>(<span class="fl">8</span>) +
  <span class="fu">geom_line</span>(<span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0.6</span>) +
  <span class="fu">facet_grid</span>(<span class="no">decline_rate_label</span> ~ <span class="no">peak_location_label</span>) +
  <span class="fu">xlab</span>(<span class="st">"Distance to take-off (m)"</span>) +
  <span class="fu">ylab</span>(<span class="st">"Force percentage"</span>) +
  <span class="fu">labs</span>(<span class="kw">color</span> <span class="kw">=</span> <span class="st">"Push-off distance"</span>)</pre></body></html></div>
<div class="figure" style="text-align: center">
<img src="introduction-vjsim_files/figure-html/force-length-characteristic-take-off-1.png" alt="Force-Length characteristic using take-off point as frame of reference" width="90%"><p class="caption">
Force-Length characteristic using take-off point as frame of reference
</p>
</div>
</div>
<div id="force-time-characteristic" class="section level2">
<h2 class="hasAnchor">
<a href="#force-time-characteristic" class="anchor"></a>Force-Time Characteristic</h2>
<p>Besides being able to achieve only force percentage at a given percent of the push-off distance, Force Generator cannot be activated instantaneously. It takes time (<span class="math inline">\(t\)</span>) to reach <em>full activation level</em>. Let’s assume here that “no activation” equals to 0%, while “full activation” equals 100% of the activation level. The shape of this relationship (i.e. activation level ~ time) represents the Force-Time characteristic of the Force Generator.</p>
<p>In <code>vjsim</code>, this characteristic is represented with the <em>sigmoid</em> curve using the <code><a href="../reference/fgen_get_activation.html">vjsim::fgen_get_activation</a></code> function. Parameter of this curve (and function), and thus Force-Time characteristic, is the <strong>time to max activation</strong> (<code>time_to_max_activation</code>). Time to max activation represents time it takes to reach full activation (100%) from zero activation.</p>
<p>But at the beginning of the vertical jump push-off (<span class="math inline">\(d=0m\)</span> and <span class="math inline">\(t=0s\)</span>) there is some activation needed due to the weight of the load that needs to be supported. Reaching full activation from some <em>initial activation</em> takes less time than reaching full activation from zero activation for the same time to the max activation parameter. This represents an assumption in the <code>vjsim</code> and <code><a href="../reference/fgen_get_activation.html">vjsim::fgen_get_activation</a></code> function. The code and Figure below demonstrate this relationship.</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="no">parameters</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html">expand.grid</a></span>(
  <span class="kw">current_time</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="fl">0</span>, <span class="fl">0.6</span>, <span class="kw">length.out</span> <span class="kw">=</span> <span class="fl">1000</span>),
  <span class="kw">initial_activation</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>, <span class="fl">0.2</span>, <span class="fl">0.5</span>),
  <span class="kw">time_to_max_activation</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.3</span>, <span class="fl">0.5</span>)
)

<span class="no">force_time</span> <span class="kw">&lt;-</span> <span class="no">parameters</span> <span class="kw">%&gt;%</span>
  <span class="fu">mutate</span>(
    <span class="kw">activation</span> <span class="kw">=</span> <span class="kw pkg">vjsim</span><span class="kw ns">::</span><span class="fu"><a href="../reference/fgen_get_activation.html">fgen_get_activation</a></span>(
      <span class="kw">current_time</span> <span class="kw">=</span> <span class="no">current_time</span>,
      <span class="kw">initial_activation</span> <span class="kw">=</span> <span class="no">initial_activation</span>,
      <span class="kw">time_to_max_activation</span> <span class="kw">=</span> <span class="no">time_to_max_activation</span>
    ),
    <span class="kw">initial_activation_label</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="no">initial_activation</span>),
    <span class="kw">time_to_max_activation_label</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span>(<span class="st">"Time to max activation ="</span>, <span class="no">time_to_max_activation</span>)),
  )

<span class="fu">ggplot</span>(
  <span class="no">force_time</span>,
  <span class="fu">aes</span>(
    <span class="kw">x</span> <span class="kw">=</span> <span class="no">current_time</span>,
    <span class="kw">y</span> <span class="kw">=</span> <span class="no">activation</span>,
    <span class="kw">group</span> <span class="kw">=</span> <span class="no">initial_activation_label</span>,
    <span class="kw">color</span> <span class="kw">=</span> <span class="no">initial_activation_label</span>
  )
) +
  <span class="fu"><a href="https://rdrr.io/pkg/cowplot/man/theme_cowplot.html">theme_cowplot</a></span>(<span class="fl">12</span>) +
  <span class="fu">geom_line</span>() +
  <span class="fu">facet_wrap</span>(~<span class="no">time_to_max_activation_label</span>) +
  <span class="fu">xlab</span>(<span class="st">"Time (s)"</span>) +
  <span class="fu">ylab</span>(<span class="st">"Activation"</span>) +
  <span class="fu">labs</span>(<span class="kw">color</span> <span class="kw">=</span> <span class="st">"Initial activation"</span>)</pre></body></html></div>
<div class="figure" style="text-align: center">
<img src="introduction-vjsim_files/figure-html/force-time-characteristic-1.png" alt="Force-Time characteristic" width="90%"><p class="caption">
Force-Time characteristic
</p>
</div>
<p>As already explained in the Force-Length characteristic, Force Generator at a particular percent of the push-off distance can generate only a percent of max force (e.g. 80% at the beginning of the vertical jump push-off; <span class="math inline">\(d=0\)</span> and <span class="math inline">\(t=0\)</span>). Combining max force and force percentage gives us the <strong>potential force</strong> (<span class="math inline">\(F_{potential}\)</span>) that can be reached with the full activation. For example, if the max force is equal to 3,000N, and force percentage at a particular percent of the push-off distance is 90%, the potential force is equal to 2,700N. But as explained, this force cannot be reached instantaneously due to Force-Time characteristics of the Force Generator. This potential force can only be reached when full activation is reached. The product of the activation level and potential force yields <strong>generated force</strong> (<span class="math inline">\(F_{generated}\)</span>).</p>
<p>How is initial activation calculated assuming max force, force percentage, and weight? In <code>vjsim</code>, initial activation is calculated with the following equation:</p>
<p><span class="math display">\[
Activation_{initial} = \frac{w}{F_{potential}}
\]</span></p>
<p>The following code and Figure demonstrates this calculus and the effects of the assumptions.</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="no">parameters</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html">expand.grid</a></span>(
  <span class="kw">current_time</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="fl">0</span>, <span class="fl">0.5</span>, <span class="kw">length.out</span> <span class="kw">=</span> <span class="fl">1000</span>),
  <span class="kw">max_force</span> <span class="kw">=</span> <span class="fl">3000</span>,
  <span class="kw">weight</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">75</span> * <span class="fl">9.81</span>, <span class="fl">85</span> * <span class="fl">9.81</span>),
  <span class="kw">force_percentage</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.6</span>, <span class="fl">0.8</span>),
  <span class="kw">time_to_max_activation</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.3</span>, <span class="fl">0.5</span>)
)

<span class="no">force_time</span> <span class="kw">&lt;-</span> <span class="no">parameters</span> <span class="kw">%&gt;%</span>
  <span class="fu">mutate</span>(
    <span class="kw">potential_force</span> <span class="kw">=</span> <span class="no">max_force</span> * <span class="no">force_percentage</span>,
    <span class="kw">initial_activation</span> <span class="kw">=</span> <span class="no">weight</span> / <span class="no">potential_force</span>,

    <span class="kw">activation</span> <span class="kw">=</span> <span class="kw pkg">vjsim</span><span class="kw ns">::</span><span class="fu"><a href="../reference/fgen_get_activation.html">fgen_get_activation</a></span>(
      <span class="kw">current_time</span> <span class="kw">=</span> <span class="no">current_time</span>,
      <span class="kw">initial_activation</span> <span class="kw">=</span> <span class="no">initial_activation</span>,
      <span class="kw">time_to_max_activation</span> <span class="kw">=</span> <span class="no">time_to_max_activation</span>
    ),

    <span class="kw">generated_force</span> <span class="kw">=</span> <span class="no">activation</span> * <span class="no">potential_force</span>,

    <span class="kw">weight_label</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="no">weight</span>),
    <span class="kw">time_to_max_activation_label</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span>(<span class="st">"Time to max activation ="</span>, <span class="no">time_to_max_activation</span>)),
    <span class="kw">force_percentage_label</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="no">force_percentage</span>)
  )

<span class="fu">ggplot</span>(
  <span class="no">force_time</span>,
  <span class="fu">aes</span>(
    <span class="kw">x</span> <span class="kw">=</span> <span class="no">current_time</span>,
    <span class="kw">y</span> <span class="kw">=</span> <span class="no">activation</span>,
    <span class="kw">color</span> <span class="kw">=</span> <span class="no">weight_label</span>,
    <span class="kw">linetype</span> <span class="kw">=</span> <span class="no">force_percentage_label</span>
  )
) +
  <span class="fu"><a href="https://rdrr.io/pkg/cowplot/man/theme_cowplot.html">theme_cowplot</a></span>(<span class="fl">12</span>) +
  <span class="fu">geom_line</span>() +
  <span class="fu">facet_wrap</span>(~<span class="no">time_to_max_activation_label</span>) +
  <span class="fu">xlab</span>(<span class="st">"Time (s)"</span>) +
  <span class="fu">ylab</span>(<span class="st">"Activation"</span>) +
  <span class="fu">labs</span>(<span class="kw">color</span> <span class="kw">=</span> <span class="st">"Weight (N)"</span>, <span class="kw">linetype</span> <span class="kw">=</span> <span class="st">"Force Percentage"</span>)</pre></body></html></div>
<div class="figure" style="text-align: center">
<img src="introduction-vjsim_files/figure-html/initial-activation-1.png" alt="Calculating initial activation" width="90%"><p class="caption">
Calculating initial activation
</p>
</div>
<div class="sourceCode" id="cb6"><html><body><pre class="r">
<span class="fu">ggplot</span>(
  <span class="no">force_time</span>,
  <span class="fu">aes</span>(
    <span class="kw">x</span> <span class="kw">=</span> <span class="no">current_time</span>,
    <span class="kw">y</span> <span class="kw">=</span> <span class="no">generated_force</span>,
    <span class="kw">color</span> <span class="kw">=</span> <span class="no">weight_label</span>,
    <span class="kw">linetype</span> <span class="kw">=</span> <span class="no">force_percentage_label</span>
  )
) +
  <span class="fu"><a href="https://rdrr.io/pkg/cowplot/man/theme_cowplot.html">theme_cowplot</a></span>(<span class="fl">12</span>) +
  <span class="fu">geom_line</span>() +
  <span class="fu">facet_wrap</span>(~<span class="no">time_to_max_activation_label</span>) +
  <span class="fu">xlab</span>(<span class="st">"Time (s)"</span>) +
  <span class="fu">ylab</span>(<span class="st">"Generated Force (N)"</span>) +
  <span class="fu">labs</span>(<span class="kw">color</span> <span class="kw">=</span> <span class="st">"Weight (N)"</span>, <span class="kw">linetype</span> <span class="kw">=</span> <span class="st">"Force Percentage"</span>)</pre></body></html></div>
<div class="figure" style="text-align: center">
<img src="introduction-vjsim_files/figure-html/initial-activation-2.png" alt="Calculating initial activation" width="90%"><p class="caption">
Calculating initial activation
</p>
</div>
</div>
<div id="force-velocity-characteristic" class="section level2">
<h2 class="hasAnchor">
<a href="#force-velocity-characteristic" class="anchor"></a>Force-Velocity Characteristic</h2>
<p>So far, the Force-Length and Force-Time characteristics assumed <em>static</em> conditions or <span class="math inline">\(v=0m/s\)</span>. In plain English, we used <em>isometric</em> or static conditions by holding the Force Generator and probing it. But once the Force Generator starts moving, there is an additional component that is modeled with the <em>viscous</em> properties:</p>
<p><span class="math display">\[
F_{viscous} = k \times v
\]</span></p>
<p>In <em>real-life</em>, the faster the muscles (i.e. Force Generator) are shortening, the less force they can exert. The mechanism behind this is not really understood (pardon my ignorance if I am wrong), but it is hypothesized that it is due to the shortening of the time <em>cross-bridges</em> in the muscle cell have to perform the cycling. Another explanation might be an increase in the viscous forces inside the muscle, that resist movement. Anyway, this <em>phenomenological</em> characteristic (i.e. muscle or Force Generator decrease force production as velocity increases) can be modeled with the above equation. The higher the <span class="math inline">\(k\)</span> parameter, the bigger the resistance.</p>
<p>Let’s assume that the max force is 2700N and that <span class="math inline">\(k=675\)</span>. In <em>unconstrained</em> conditions (hypothetical conditions where Force Generator has unlimited push-off distance, unlimited time, zero external load, and maximal force percentage) the <strong>max velocity</strong> is achieved when max force becomes equal to viscous force:</p>
<p><span class="math display">\[
F_{max} = F_{viscous}
\]</span></p>
<p><span class="math display">\[
2700 = k \times v
\]</span></p>
<p><span class="math display">\[
2700 = 675 \times v
\]</span></p>
<p><span class="math display">\[
v = \frac{2700}{675}
\]</span></p>
<p><span class="math display">\[
v = 4 (m/s)
\]</span></p>
<p>In other words:</p>
<p><span class="math display">\[
v_{max} = \frac{F_{max}}{k}
\]</span></p>
<p>Rather than using <span class="math inline">\(k\)</span> as a parameter (which is not very intuitive), we can use <strong>max velocity</strong> as a parameter of this Force Generator component. Max velocity and max force represent <em>intrinsic</em> characteristics of the Force Generator. Please note that the max velocity parameter represents maximal velocity Force Generator can achieve in the unconstrained environment (unlimited Push-off distance and no external resistance; i.e. force).</p>
<p>Using the <code><a href="../reference/fgen_get_viscous_force.html">vjsim::fgen_get_viscous_force</a></code> function, we can get viscous or opposing force inside the Force Generator.</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="no">parameters</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html">expand.grid</a></span>(
  <span class="kw">current_velocity</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="fl">0</span>, <span class="fl">4.5</span>, <span class="kw">length.out</span> <span class="kw">=</span> <span class="fl">1000</span>),
  <span class="kw">max_force</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">2000</span>, <span class="fl">2500</span>, <span class="fl">3000</span>),
  <span class="kw">max_velocity</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span>)
)

<span class="no">force_velocity</span> <span class="kw">&lt;-</span> <span class="no">parameters</span> <span class="kw">%&gt;%</span>
  <span class="fu">mutate</span>(
    <span class="kw">force</span> <span class="kw">=</span> <span class="kw pkg">vjsim</span><span class="kw ns">::</span><span class="fu"><a href="../reference/fgen_get_viscous_force.html">fgen_get_viscous_force</a></span>(
      <span class="kw">current_velocity</span> <span class="kw">=</span> <span class="no">current_velocity</span>,
      <span class="kw">max_force</span> <span class="kw">=</span> <span class="no">max_force</span>,
      <span class="kw">max_velocity</span> <span class="kw">=</span> <span class="no">max_velocity</span>
    ),
    <span class="kw">max_velocity</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="no">max_velocity</span>),
    <span class="kw">max_force_label</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span>(<span class="st">"Max Force = "</span>, <span class="no">max_force</span>))
  )

<span class="fu">ggplot</span>(
  <span class="no">force_velocity</span>,
  <span class="fu">aes</span>(
    <span class="kw">x</span> <span class="kw">=</span> <span class="no">current_velocity</span>,
    <span class="kw">y</span> <span class="kw">=</span> <span class="no">force</span>,
    <span class="kw">group</span> <span class="kw">=</span> <span class="no">max_velocity</span>,
    <span class="kw">color</span> <span class="kw">=</span> <span class="no">max_velocity</span>
  )
) +
  <span class="fu"><a href="https://rdrr.io/pkg/cowplot/man/theme_cowplot.html">theme_cowplot</a></span>(<span class="fl">12</span>) +
  <span class="fu">geom_hline</span>(<span class="fu">aes</span>(<span class="kw">yintercept</span> <span class="kw">=</span> <span class="no">max_force</span>), <span class="kw">linetype</span> <span class="kw">=</span> <span class="st">"dashed"</span>) +
  <span class="fu">geom_line</span>() +
  <span class="fu">facet_wrap</span>(~<span class="no">max_force_label</span>) +
  <span class="fu">xlab</span>(<span class="st">"Velocity (m/s)"</span>) +
  <span class="fu">ylab</span>(<span class="st">"Viscous Force (N)"</span>) +
  <span class="fu">labs</span>(<span class="kw">color</span> <span class="kw">=</span> <span class="st">"Max Velocity"</span>)</pre></body></html></div>
<div class="figure" style="text-align: center">
<img src="introduction-vjsim_files/figure-html/force-velocity-characteristic-1.png" alt="Force-Velocity characteristic" width="90%"><p class="caption">
Force-Velocity characteristic
</p>
</div>
<p>The above Figure represents intrinsic viscous force generated at particular velocities. Assuming unconstrained conditions, we are interested in estimating maximal velocity that can be achieved when the Force Generator faces some external resistance. Since we are assuming unconstrained conditions, the mass of the resistance is not important (due unlimited Push-off distance to accelerate), but only the facing external resisting force. The Force Generator faces two opposing forces then: external resistance force and viscous force (which is internal or intrinsic part of the Force Generator itself). <strong>Peak velocity</strong> is achieved when the sum of forces is equal to zero. I keep saying the sum of force, because <span class="math inline">\(F_{viscous}\)</span> and <span class="math inline">\(F_{external}\)</span> are in the opposite direction to <span class="math inline">\(F_{max}\)</span>; thus, they have a negative sign.</p>
<p>Please note the difference between peak velocity, which is the maximal velocity that can be reached in unconstrained conditions at a particular level of the external resistance force, a maximal velocity, which is “maximal” maximal velocity that can be reached in unconstrained conditions when there is zero external resistance force.</p>
<p><span class="math display">\[
F_{max} - F_{viscous} - F_{external} = 0
\]</span></p>
<p>If we shift the forces around, we get the following:</p>
<p><span class="math display">\[
F_{viscous} = F_{max} - F_{external}
\]</span></p>
<p><span class="math display">\[
(k \times v) = F_{max} - F_{external}
\]</span></p>
<p><span class="math display">\[
v_{peak} = \frac{F_{max} - F_{external}}{k}
\]</span></p>
<p>If we use the equation <span class="math inline">\(v_{max} = \frac{F_{max}}{k}\)</span> to get <span class="math inline">\(k\)</span>, we get the following equation to calculate <span class="math inline">\(v_{peak}\)</span>:</p>
<p><span class="math display">\[
v_{peak} = \frac{F_{max} - F_{external}}{\frac{F_{max}}{v_{max}}}
\]</span></p>
<p>Assuming few combinations of max force and a max velocity of the Force Generator, depending on the level of facing external resistance (N), we can calculate peak velocity (<span class="math inline">\(v\)</span>) that can hypothetically be reached in the unconstrained conditions. You can use the above equation, or the <code><a href="../reference/fgen_get_velocity.html">vjsim::fgen_get_velocity</a></code> function.</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="no">parameters</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html">expand.grid</a></span>(
  <span class="kw">external_force</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="fl">0</span>, <span class="fl">3000</span>, <span class="kw">length.out</span> <span class="kw">=</span> <span class="fl">1000</span>),
  <span class="kw">max_force</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">2000</span>, <span class="fl">3000</span>),
  <span class="kw">max_velocity</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">3</span>, <span class="fl">4</span>)
)

<span class="no">velocity_reached</span> <span class="kw">&lt;-</span> <span class="no">parameters</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>(
    <span class="no">external_force</span> <span class="kw">&lt;</span> <span class="no">max_force</span>
  ) <span class="kw">%&gt;%</span>
  <span class="fu">mutate</span>(
    <span class="kw">velocity_reached</span> <span class="kw">=</span> <span class="kw pkg">vjsim</span><span class="kw ns">::</span><span class="fu"><a href="../reference/fgen_get_velocity.html">fgen_get_velocity</a></span>(
      <span class="kw">external_force</span> <span class="kw">=</span> <span class="no">external_force</span>,
      <span class="kw">max_force</span> <span class="kw">=</span> <span class="no">max_force</span>,
      <span class="kw">max_velocity</span> <span class="kw">=</span> <span class="no">max_velocity</span>
    ),
    <span class="kw">max_velocity</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="no">max_velocity</span>),
    <span class="kw">max_force_label</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="no">max_force</span>),
    <span class="kw">id</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span>(<span class="no">max_force</span>, <span class="no">max_velocity</span>)
  ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>(<span class="no">id</span> <span class="kw">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"2000 4"</span>, <span class="st">"3000 3"</span>))

<span class="fu">ggplot</span>(
  <span class="no">velocity_reached</span>,
  <span class="fu">aes</span>(
    <span class="kw">x</span> <span class="kw">=</span> <span class="no">external_force</span>,
    <span class="kw">y</span> <span class="kw">=</span> <span class="no">velocity_reached</span>,
    <span class="kw">color</span> <span class="kw">=</span> <span class="no">max_velocity</span>,
    <span class="kw">linetype</span> <span class="kw">=</span> <span class="no">max_force_label</span>
  )
) +
  <span class="fu"><a href="https://rdrr.io/pkg/cowplot/man/theme_cowplot.html">theme_cowplot</a></span>(<span class="fl">12</span>) +
  <span class="fu">geom_line</span>() +
  <span class="fu">ylab</span>(<span class="st">"Velocity reached (m/s)"</span>) +
  <span class="fu">xlab</span>(<span class="st">"External Force (N)"</span>) +
  <span class="fu">labs</span>(<span class="kw">color</span> <span class="kw">=</span> <span class="st">"Max Velocity"</span>, <span class="kw">linetype</span> <span class="kw">=</span> <span class="st">"Max Force"</span>)</pre></body></html></div>
<div class="figure" style="text-align: center">
<img src="introduction-vjsim_files/figure-html/unnamed-chunk-2-1.png" alt="Relationship between external force and velocity that can be reached" width="90%"><p class="caption">
Relationship between external force and velocity that can be reached
</p>
</div>
<p>The above represent unconstrained Force Generator <strong>Force-Velocity profile</strong>. It is the intrinsic (or latent) quality (characteristic or trait) of the Force Generator that can be <em>manifested</em> when Force Generator faces external force under unconstrained conditions.</p>
<div id="power-of-the-force-generator" class="section level3">
<h3 class="hasAnchor">
<a href="#power-of-the-force-generator" class="anchor"></a>Power of the Force Generator</h3>
<p>From the Force-Velocity profile of the Force Generator we can calculate generated Power (in unconstrained conditions). Power output is calculated by multiplying the velocity reached and external force:</p>
<p><span class="math display">\[P = F_{external} \times v_{peak}\]</span></p>
<p>The following figure depicts power output of the Forge Generator at different external forces once the <span class="math inline">\(v_{peak}\)</span> is reached:</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="no">velocity_reached</span> <span class="kw">&lt;-</span> <span class="no">velocity_reached</span> <span class="kw">%&gt;%</span>
  <span class="fu">mutate</span>(
    <span class="kw">power</span> <span class="kw">=</span> <span class="no">external_force</span> * <span class="no">velocity_reached</span>
  )

<span class="fu">ggplot</span>(
  <span class="no">velocity_reached</span>,
  <span class="fu">aes</span>(
    <span class="kw">x</span> <span class="kw">=</span> <span class="no">external_force</span>,
    <span class="kw">y</span> <span class="kw">=</span> <span class="no">power</span>,
    <span class="kw">color</span> <span class="kw">=</span> <span class="no">max_velocity</span>,
    <span class="kw">linetype</span> <span class="kw">=</span> <span class="no">max_force_label</span>
  )
) +
  <span class="fu"><a href="https://rdrr.io/pkg/cowplot/man/theme_cowplot.html">theme_cowplot</a></span>(<span class="fl">12</span>) +
  <span class="fu">geom_line</span>() +
  <span class="fu">ylab</span>(<span class="st">"Power (W)"</span>) +
  <span class="fu">xlab</span>(<span class="st">"External Force (N)"</span>) +
  <span class="fu">labs</span>(<span class="kw">color</span> <span class="kw">=</span> <span class="st">"Max Velocity"</span>, <span class="kw">linetype</span> <span class="kw">=</span> <span class="st">"Max Force"</span>)</pre></body></html></div>
<div class="figure" style="text-align: center">
<img src="introduction-vjsim_files/figure-html/unnamed-chunk-3-1.png" alt="Relationship between external force and power" width="90%"><p class="caption">
Relationship between external force and power
</p>
</div>
<p>As can be seen from the figure above, there is an <strong>max power</strong> at particular external load. Assuming linear Force-Velocity relationship, this max power is achieved at halfway to both max force and max velocity. It is thus equal to:</p>
<p><span class="math display">\[P_{max} = \frac{F_{max} \times v_{max}}{4}\]</span></p>
<p>Since max power combines both max force and max velocity, it can be thought of as some <em>ultimate</em> characteristic of the Force Generator. This is important <em>construct</em> that will be utilized with the optimization models. We can take <em>realist</em> perspective regarding max power, claiming that it represents <em>ontological</em> or real construct, or take more <em>constructivist</em> perspective claiming that max power represents just a neat way of combining max force and max velocity characteristics. I am personally leaning more towards constructivism. As will be explained later, optimization models approach max power from realist perspective. But more on that in the <code>optimization-vjsim</code> vignette.</p>
<p>As stated multiple times, max force, max velocity, and max power are characteristics of the Force Generator in the unconstrained conditions (thus represent <em>latent</em> characteristic). Unfortunately, the Force Generator functions in the <em>constrained</em> environment, facing particular inertia (bodyweight and external load) and limited distance over which that inertia can be accelerated (i.e. push-off distance). Plus, there are Force-Length and Force-Time characteristics that will affect performance in the constrained environment.</p>
<p>How will these affect the constrained, or <em>manifested</em>, Force Generator force-velocity profile? This is what (among a few other things) we are interested in figuring out by using the <code>vjsim</code> simulations. This is discussed in <code>simulation-vjsim</code> vignette.</p>
<p>Let’s quickly review the parameters of the Force Generator and the simulation in general before finishing this vignette.</p>
</div>
</div>
<div id="list-of-force-generator-parameters" class="section level2">
<h2 class="hasAnchor">
<a href="#list-of-force-generator-parameters" class="anchor"></a>List of Force Generator Parameters</h2>
<p>Parameters of the system are the following:</p>
<ul>
<li><p><strong>Mass</strong> (inertia) and <strong>weight</strong> (<span class="math inline">\(mass \times 9.81\)</span>) represent load that the Force Generator needs to accelerate. These involve <strong>bodyweight</strong> and additional <strong>external load</strong>, such as extra weight (e.g. BW + 60kg).</p></li>
<li><p><strong>Push-off distance</strong>, or the limited distance over which the Force Generator can accelerate the mass object.</p></li>
</ul>
<p>Parameters of the Force Generator involve the following:</p>
<ul>
<li><p><strong>Max force</strong>, which is the ultimate force that Force Generator can manifest in isometric conditions with 100% Force-Length relationship.</p></li>
<li><p><strong>Max velocity</strong>, which is the final velocity that Force Generator can manifest in <em>unconstrained</em> conditions (unlimited Push-off distance and zero external resistance).</p></li>
<li><p>Max force and max velocity can be combined into <strong>max power</strong>. Realist position assumes this is real construct of the Force Generator and one that is ultimate characteristic. Constructivist position see it as neat summary of the Force-Velocity profile</p></li>
<li><p>Max force and max velocity represent <em>unconstrained</em> Force Generator Force-Velocity profile.</p></li>
<li><p><em>Force-Length</em> characteristic has two parameters: <strong>decline rate</strong> and <strong>peak location</strong>.</p></li>
<li><p><em>Force-Time</em> characteristic has one parameter: <strong>time to max activation</strong>. <strong>Initial activation</strong> parameter is (or should be) automatically calculated to represents the activation needed to support the weight of the moving object (i.e. <span class="math inline">\((bodyweight + external \; load) \times 9.81\)</span>). This is required since the vertical jumps start from a dead start. Initial activation will not be considered a parameter that can vary in the simulations.</p></li>
</ul>
<p>The schematic diagram on the Figure below depicts all the essential concepts covered so far that are important for further analysis and simulation.</p>
<div class="figure" style="text-align: center">
<img src="schematic-diagram.png" alt="Schematic diagrom of the components, parameters, and resulting forces in vjsim" width="90%"><p class="caption">
Schematic diagrom of the components, parameters, and resulting forces in vjsim
</p>
</div>
<p>The force generation mechanism is a follows:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Max force</strong> of the Force Generator represent major parameter, together with <strong>Max Velocity</strong>
</li>
<li>Based on the <em>current position</em> (<span class="math inline">\(d\)</span>; where <span class="math inline">\(d=0m\)</span> is the position of the push-off start) on the Push-off distance, based on the Force-Length characteristic, particular <strong>force percentage</strong> limits the <strong>potential force</strong> than can be expressed</li>
<li>Based on the <em>current time</em> (<span class="math inline">\(t\)</span>; where <span class="math inline">\(t=0s\)</span> is the moment of the push-off start), particular <em>level of activation</em> is reached due to the Force-Time characteristic</li>
<li>
<strong>Generated force</strong> is the product of the level of activation and potential force</li>
<li>Due to the Force-Velocity characteristic, <strong>viscous force</strong> is deducted from generated force to yield <strong>ground reaction force</strong> (<strong>GRF</strong>).</li>
<li>Before deducting viscous force from the generated force, viscous force needs to be <em>scaled-down</em> using force percentage. In a more complex simulation, the viscous force would have its own Force-Length characteristic, but in this simple version, we are going to assume it is the same as Force-Length characteristic for the max force. If we do not scale viscous force, at the last moments before the take-off, due to sudden drop of force percentage to 0, the viscous force would be much higher than the generated force, which would yield negative ground reaction force (which is impossible for a jump).</li>
<li>Ground reaction force (GRF) is the force acting on the load. GRF is the <em>most important force</em> in the <code>vjsim</code>, since it represents the force usually tracked in the sports science.</li>
<li>GRF is acting on the load object, but load also has weight. To get <strong>propulsive force</strong>, we need to deduct <strong>weight</strong> from the GRF</li>
<li>Once we have propulsive or net force, to calculate acceleration, we need to divide it with load inertia or <strong>mass</strong>
</li>
</ol>
<p>This whole process is integrated in the <code><a href="../reference/fgen_get_output.html">vjsim::fgen_get_output</a></code> function. This function calculates all the forces and acceleration based on the <code>current_time</code>, <code>current_distance</code>, <code>current_velocity</code>, as well as the other system constraints and parameters of the Forge Generator.</p>
<div class="sourceCode" id="cb10"><html><body><pre class="r"><span class="no">state</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html">expand.grid</a></span>(
  <span class="kw">current_time</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="fl">0</span>, <span class="fl">0.25</span>, <span class="kw">length.out</span> <span class="kw">=</span> <span class="fl">1000</span>),
  <span class="kw">current_distance</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.1</span>, <span class="fl">0.15</span>, <span class="fl">0.2</span>, <span class="fl">0.25</span>, <span class="fl">0.3</span>),
  <span class="kw">current_velocity</span> <span class="kw">=</span> <span class="fl">0</span>
)

<span class="no">fgen_data</span> <span class="kw">&lt;-</span> <span class="kw pkg">vjsim</span><span class="kw ns">::</span><span class="fu"><a href="../reference/fgen_get_output.html">fgen_get_output</a></span>(
  <span class="kw">current_time</span> <span class="kw">=</span> <span class="no">state</span>$<span class="no">current_time</span>,
  <span class="kw">current_distance</span> <span class="kw">=</span> <span class="no">state</span>$<span class="no">current_distance</span>,
  <span class="kw">current_velocity</span> <span class="kw">=</span> <span class="no">state</span>$<span class="no">current_velocity</span>,

  <span class="kw">mass</span> <span class="kw">=</span> <span class="fl">75</span>,
  <span class="kw">push_off_distance</span> <span class="kw">=</span> <span class="fl">0.4</span>,

  <span class="kw">max_force</span> <span class="kw">=</span> <span class="fl">3000</span>,
  <span class="kw">max_velocity</span> <span class="kw">=</span> <span class="fl">4</span>,

  <span class="kw">decline_rate</span> <span class="kw">=</span> <span class="fl">1.5</span>,
  <span class="kw">peak_location</span> <span class="kw">=</span> -<span class="fl">0.1</span>,

  <span class="kw">time_to_max_activation</span> <span class="kw">=</span> <span class="fl">0.3</span>
)

<span class="fu">as_tibble</span>(<span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span>(<span class="no">fgen_data</span>))
<span class="co">#&gt; # A tibble: 5,000 x 24</span>
<span class="co">#&gt;    kinematics.time kinematics.dist… kinematics.velo… system_constrai…</span>
<span class="co">#&gt;              &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;</span>
<span class="co">#&gt;  1        0                     0.1                0               75</span>
<span class="co">#&gt;  2        0.000250              0.1                0               75</span>
<span class="co">#&gt;  3        0.000501              0.1                0               75</span>
<span class="co">#&gt;  4        0.000751              0.1                0               75</span>
<span class="co">#&gt;  5        0.00100               0.1                0               75</span>
<span class="co">#&gt;  6        0.00125               0.1                0               75</span>
<span class="co">#&gt;  7        0.00150               0.1                0               75</span>
<span class="co">#&gt;  8        0.00175               0.1                0               75</span>
<span class="co">#&gt;  9        0.00200               0.1                0               75</span>
<span class="co">#&gt; 10        0.00225               0.1                0               75</span>
<span class="co">#&gt; # … with 4,990 more rows, and 20 more variables:</span>
<span class="co">#&gt; #   system_constraints.weight &lt;dbl&gt;,</span>
<span class="co">#&gt; #   system_constraints.push_off_distance &lt;dbl&gt;,</span>
<span class="co">#&gt; #   system_constraints.gravity_const &lt;dbl&gt;, fgen_parameters.max_force &lt;dbl&gt;,</span>
<span class="co">#&gt; #   fgen_parameters.max_velocity &lt;dbl&gt;, fgen_parameters.decline_rate &lt;dbl&gt;,</span>
<span class="co">#&gt; #   fgen_parameters.peak_location &lt;dbl&gt;,</span>
<span class="co">#&gt; #   fgen_parameters.time_to_max_activation &lt;dbl&gt;,</span>
<span class="co">#&gt; #   fgen_parameters.initial_activation &lt;dbl&gt;, fgen_output.push_off_perc &lt;dbl&gt;,</span>
<span class="co">#&gt; #   fgen_output.distance_to_take_off &lt;dbl&gt;, fgen_output.force_percentage &lt;dbl&gt;,</span>
<span class="co">#&gt; #   fgen_output.potential_force &lt;dbl&gt;, fgen_output.activation &lt;dbl&gt;,</span>
<span class="co">#&gt; #   fgen_output.generated_force &lt;dbl&gt;, fgen_output.viscous_force &lt;dbl&gt;,</span>
<span class="co">#&gt; #   kinetics.ground_reaction_force &lt;dbl&gt;, kinetics.propulsive_force &lt;dbl&gt;,</span>
<span class="co">#&gt; #   kinetics.acceleration &lt;dbl&gt;, kinetics.power &lt;dbl&gt;</span></pre></body></html></div>
</div>
</div>
<div id="shiny-app" class="section level1">
<h1 class="hasAnchor">
<a href="#shiny-app" class="anchor"></a>Shiny App</h1>
<p>To run the <a href="https://athletess.shinyapps.io/shiny-simulator/">Shiny App</a> (this will take you to the <em>shinyapps.io</em>), and play with the above Force Generator characteristics, use the following code, or by click on the previous link.</p>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="kw pkg">vjsim</span><span class="kw ns">::</span><span class="fu"><a href="../reference/run_simulator.html">run_simulator</a></span>()</pre></body></html></div>
</div>
<div id="want-to-learn-more" class="section level1">
<h1 class="hasAnchor">
<a href="#want-to-learn-more" class="anchor"></a>Want to learn more?</h1>
<p>Please continue by reading “Simulation in <code>vjsim</code>” (<a href="https://mladenjovanovic.github.io/vjsim/articles/simulation-vjsim.html">LINK</a>) vignette:</p>
<div class="sourceCode" id="cb12"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/vignette.html">vignette</a></span>(<span class="st">"simulation-vjsim"</span>)</pre></body></html></div>
</div>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p>You can either use <code><a href="../reference/fgen_get_force_percentage.html">vjsim::fgen_get_force_percentage</a></code> or simply <code>fgen_get_force_percentage</code>. I am using prefix <code>vjsim::</code> to indicate functions from the <code>vjsim</code> package<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Mladen Jovanović.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
