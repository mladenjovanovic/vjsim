<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Profiling in `vjsim` • vjsim</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Profiling in `vjsim`">
<meta property="og:description" content="vjsim">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">vjsim</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/introduction-vjsim.html">Introduction to vjsim</a>
    </li>
    <li>
      <a href="../articles/simulation-vjsim.html">Simulation basic</a>
    </li>
    <li>
      <a href="../articles/profiling-vjsim.html">Profiling in vjsim</a>
    </li>
    <li>
      <a href="../articles/optimization-vjsim.html">Optimization with vjsim</a>
    </li>
    <li>
      <a href="../articles/exploring-vjsim.html">Exploring with vjsim</a>
    </li>
    <li>
      <a href="../articles/modeling-vjsim.html">Modeling with vjsim</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mladenjovanovic/vjsim/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="profiling-vjsim_files/header-attrs-2.3/header-attrs.js"></script><script src="profiling-vjsim_files/accessible-code-block-0.0.1/empty-anchor.js"></script><script src="profiling-vjsim_files/htmlwidgets-1.5.1/htmlwidgets.js"></script><script src="profiling-vjsim_files/jquery-1.12.4/jquery.min.js"></script><link href="profiling-vjsim_files/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="profiling-vjsim_files/datatables-binding-0.14/datatables.js"></script><link href="profiling-vjsim_files/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="profiling-vjsim_files/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="profiling-vjsim_files/dt-core-1.10.20/js/jquery.dataTables.min.js"></script><link href="profiling-vjsim_files/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet">
<script src="profiling-vjsim_files/crosstalk-1.1.0.1/js/crosstalk.min.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Profiling in <code>vjsim</code>
</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/mladenjovanovic/vjsim/blob/master/vignettes/profiling-vjsim.Rmd"><code>vignettes/profiling-vjsim.Rmd</code></a></small>
      <div class="hidden name"><code>profiling-vjsim.Rmd</code></div>

    </div>

    
    
<div id="profiling" class="section level1">
<h1 class="hasAnchor">
<a href="#profiling" class="anchor"></a>Profiling</h1>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="co"># Install vjsim if you haven't already by running the following commands</span>
<span class="co"># install.packages("devtools")</span>
<span class="co"># devtools::install_github("mladenjovanovic/vjsim")</span>

<span class="co"># Install tidyverse and cowplot packages</span>
<span class="co"># install.packages(c("tidyverse", "cowplot", "DT), dependencies = TRUE)</span>

<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">vjsim</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">tidyverse</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">cowplot</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">DT</span>)</pre></body></html></div>
<p>Before reading this vignette, please read <a href="https://mladenjovanovic.github.io/vjsim/articles/introduction-vjsim.html">Introduction to vjsim</a> and <a href="https://mladenjovanovic.github.io/vjsim/articles/simulation-vjsim.html">Simulation in vjsim</a> vignettes by running:</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/vignette.html">vignette</a></span>(<span class="st">"introduction-vjsim"</span>)
<span class="fu"><a href="https://rdrr.io/r/utils/vignette.html">vignette</a></span>(<span class="st">"simulation-vjsim"</span>)</pre></body></html></div>
<p>Once we know how <code>vjsim</code> works and how to simulate one jump, we might be interested in checking how jump kinetic parameters change when we add (or remove<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>) external weight in a form of a barbell or hex-barbell. For the purpose of this vignette, this external load is equal to:</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="co"># External load in kilograms</span>
<span class="no">external_load</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>, <span class="fl">20</span>, <span class="fl">40</span>, <span class="fl">60</span>, <span class="fl">80</span>, <span class="fl">100</span>)</pre></body></html></div>
<p>To simulate vertical jump with this external loads, we will used <code><a href="../reference/vj_profile.html">vjsim::vj_profile</a></code> functions:</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="no">profile_data</span> <span class="kw">&lt;-</span> <span class="kw pkg">vjsim</span><span class="kw ns">::</span><span class="fu"><a href="../reference/vj_profile.html">vj_profile</a></span>(
  <span class="kw">external_load</span> <span class="kw">=</span> <span class="no">external_load</span>,

  <span class="co"># Simulation parameters</span>
  <span class="kw">mass</span> <span class="kw">=</span> <span class="fl">75</span>,
  <span class="kw">push_off_distance</span> <span class="kw">=</span> <span class="fl">0.4</span>,
  <span class="kw">max_force</span> <span class="kw">=</span> <span class="fl">3000</span>,
  <span class="kw">max_velocity</span> <span class="kw">=</span> <span class="fl">4</span>

  <span class="co"># Other parameters are default in the `vjsim::fgen_get_output`</span>
  <span class="co"># weight = mass * gravity_const,</span>
  <span class="co"># gravity_const = 9.81,</span>
  <span class="co"># decline_rate = 1.05,</span>
  <span class="co"># peak_location = -push_off_distance * 0.15,</span>
  <span class="co"># time_to_max_activation = 0.3</span>
)</pre></body></html></div>
<p>Data frame returned from <code><a href="../reference/vj_profile.html">vjsim::vj_profile</a></code> is the same as data frame returned from <code><a href="../reference/vj_simulate.html">vjsim::vj_simulate</a></code> with additional two columns: ‘bodyweight’ and ‘external_load’:</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html">datatable</a></span>(<span class="no">profile_data</span>, <span class="kw">rownames</span> <span class="kw">=</span> <span class="fl">FALSE</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/DT/man/formatCurrency.html">formatRound</a></span>(<span class="kw">columns</span> <span class="kw">=</span> <span class="fl">1</span>:<span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span>(<span class="no">profile_data</span>), <span class="kw">digits</span> <span class="kw">=</span> <span class="fl">2</span>)</pre></body></html></div>
<div id="htmlwidget-a62996e19cd5f7638b9a" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-a62996e19cd5f7638b9a">{"x":{"filter":"none","data":[[75,75,75,75,75,75],[0,20,40,60,80,100],[75,95,115,135,155,175],[735.75,931.95,1128.15,1324.35,1520.55,1716.75],[0.4,0.4,0.4,0.4,0.4,0.4],[9.81,9.81,9.81,9.81,9.81,9.81],[0.39830807160274,0.398603184969831,0.398823818971895,0.398607086541905,0.399103732436529,0.399326079106523],[0.34,0.367,0.398,0.435,0.482,0.544],[49.059180792942,48.9134142390974,47.590688246843,63.2952753158916,45.0246129393045,36.9777828205898],[-686.690819207058,-883.036585760903,-1080.55931175316,-1261.05472468411,-1475.5253870607,-1679.77221717941],[2.52271236821609,2.21615810679266,1.9389593309832,1.68519971607704,1.44128290309672,1.20536825481104],[0.324366854880247,0.250323993593417,0.191618923914721,0.144745060298988,0.105876473331238,0.0740526314834971],[1334.91665137574,1517.21739029203,1670.18103909806,1805.25745769221,1923.93001987846,2035.11101309422],[1292.23066945943,1505.61490502807,1688.40206799766,1847.34301533425,1984.03309124479,2104.50633197046],[1.17149432824335,1.08611222062624,1.00206989691431,0.916338129981391,0.828016042399437,0.734055292475225],[531.708077159858,604.767684062018,666.107980387536,719.588415668737,767.847651880179,812.672901405416],[189.203427616207,210.535020145303,222.980323063069,227.501961670401,223.398849979991,210.939444591932],[1563.84728576429,1647.86834894283,1673.63814167723,1654.22624291663,1593.04492091323,1493.88400993643],[12130.4734971423,14332.6294294266,16877.4302775972,19865.9030049521,23665.9598158127,28917.4269034815],[10961.3831142742,9418.35975341954,8151.01072694938,7337.78307382331,6387.69029895982,5314.33517921491],[1843.83197156564,2035.23337897857,2177.18850581003,2284.57884556949,2366.59598158128,2429.06385989244],[0.152,0.142,0.129,0.115,0.1,0.0840000000000001],[0.0332264611973322,0.0238447868563557,0.0159307393456029,0.0102524867091,0.00621614288512247,0.00344083952173764],[2.56799115378785,2.27218713479034,2.00781833476894,1.76753676766336,1.54509259180244,1.33533595090873],[0.329,0.354,0.382,0.416,0.458,0.514],[0.370214298342746,0.369297554649871,0.367046727869844,0.365525084945001,0.362804027818823,0.360483084255524],[2904.76652528266,2976.20168208058,2999.57194751737,2949.78879567697,2829.7468024392,2651.85325442824],[0.215931441040262,0.285357556989402,0.3391044170988,0.34090309635432,0.339748942914323,0.340544826718701],[0.265,0.316,0.368,0.402,0.443,0.499],[15828.5148524822,17119.1412653948,18060.708803089,18785.8593720339,19359.0493365807,19819.205335994],[0.0060306204339565,0.00371050015486848,0.00228166831108849,0.00129915224916949,0.000701409743703648,0.000348040230913208],[0.102,0.0920000000000001,0.0820000000000001,0.071,0.06,0.049],[1343.57833247854,1687.50359114723,2006.60961338553,2243.08863252797,2366.48372893629,2413.91045745548],[1665.94402906339,1842.45454534159,1978.80726945679,2091.74762313636,2189.42392853327,2275.5835050911],[29358.5214207803,25060.8436446978,20768.1596437317,16793.8615346859,13216.93077332,10032.7589975399],[0.0222337184877408,0.0155436783316617,0.0106934127054631,0.00683029024783723,0.00427220146419558,0.00232544052833159],[0.138,0.128,0.117,0.104,0.0910000000000001,0.0760000000000001],[0.0452787855717598,0.0560290279976807,0.0688590037857364,0.0823370515863169,0.103809688705726,0.129967696097688],[1.01794845347501,1.02528205358,1.03551338219705,1.04885892799578,1.07202589337783,1.10782405756825],[-1.35121803997274,-1.13004588616642,-0.936889434068897,-0.768861586095651,-0.613266860697279,-0.471312962335816],[0.464378873708762,0.490087876536082,0.51680810468891,0.543756399457819,0.574499316282998,0.608988406277797],[-1.3964968255445,-1.1860749141641,-1.00574843785463,-0.851198637681967,-0.717076549403005,-0.601280658433503],[0.456190951637574,0.478002979594573,0.49908394577422,0.518426630068221,0.53590059702086,0.549715816439812],[-1340.91923951837,-1328.33333313775,-1325.93380584015,-1295.56255276034,-1236.70188152597,-1157.96924449182],[0.538372799380877,0.553681680534113,0.557958992469719,0.560794808543908,0.562963767479143,0.563335851047503],[42.6859819163064,11.6024852639589,-18.2210288995984,-42.0855576420486,-60.1030713663345,-69.3953188762471],[1.03303278812765,1.00770614399818,0.989208122138107,0.977218330709181,0.969706618487585,0.967025369407527],[1.26135618410805,1.10807905339633,0.969479665491602,0.842599858038521,0.720641451548358,0.60268412740552]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>bodyweight<\/th>\n      <th>external_load<\/th>\n      <th>mass<\/th>\n      <th>weight<\/th>\n      <th>push_off_distance<\/th>\n      <th>gravity_const<\/th>\n      <th>take_off_distance<\/th>\n      <th>take_off_time<\/th>\n      <th>take_off_ground_reaction_force<\/th>\n      <th>take_off_propulsive_force<\/th>\n      <th>take_off_velocity<\/th>\n      <th>height<\/th>\n      <th>mean_GRF_over_distance<\/th>\n      <th>mean_GRF_over_time<\/th>\n      <th>mean_velocity<\/th>\n      <th>work_done<\/th>\n      <th>impulse<\/th>\n      <th>mean_power<\/th>\n      <th>mean_RFD<\/th>\n      <th>mean_RPD<\/th>\n      <th>peak_GRF<\/th>\n      <th>peak_GRF_time<\/th>\n      <th>peak_GRF_distance<\/th>\n      <th>peak_velocity<\/th>\n      <th>peak_velocity_time<\/th>\n      <th>peak_velocity_distance<\/th>\n      <th>peak_power<\/th>\n      <th>peak_power_distance<\/th>\n      <th>peak_power_time<\/th>\n      <th>peak_RFD<\/th>\n      <th>peak_RFD_distance<\/th>\n      <th>peak_RFD_time<\/th>\n      <th>GRF_at_100ms<\/th>\n      <th>GRF_at_200ms<\/th>\n      <th>peak_RPD<\/th>\n      <th>peak_RPD_distance<\/th>\n      <th>peak_RPD_time<\/th>\n      <th>diff_peak_to_take_off_velocity<\/th>\n      <th>ratio_peak_to_take_off_velocity<\/th>\n      <th>diff_mean_to_take_off_velocity<\/th>\n      <th>ratio_mean_to_take_off_velocity<\/th>\n      <th>diff_mean_to_peak_velocity<\/th>\n      <th>ratio_mean_to_peak_velocity<\/th>\n      <th>diff_mean_to_peak_power<\/th>\n      <th>ratio_mean_to_peak_power<\/th>\n      <th>diff_mean_GRF_over_distance_to_time<\/th>\n      <th>ratio_mean_GRF_over_distance_to_time<\/th>\n      <th>mean_velocity_as_TOV_half<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"targets":0,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":1,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":2,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":3,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":4,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":5,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":6,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":7,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":8,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":9,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":10,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":11,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":12,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":13,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":14,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":15,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":16,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":17,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":18,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":19,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":20,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":21,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":22,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":23,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":24,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":25,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":26,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":27,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":28,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":29,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":30,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":31,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":32,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":33,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":34,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":35,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":36,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":37,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":38,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":39,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":40,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":41,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":42,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":43,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":44,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":45,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":46,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":47,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"className":"dt-right","targets":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47]}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":["options.columnDefs.0.render","options.columnDefs.1.render","options.columnDefs.2.render","options.columnDefs.3.render","options.columnDefs.4.render","options.columnDefs.5.render","options.columnDefs.6.render","options.columnDefs.7.render","options.columnDefs.8.render","options.columnDefs.9.render","options.columnDefs.10.render","options.columnDefs.11.render","options.columnDefs.12.render","options.columnDefs.13.render","options.columnDefs.14.render","options.columnDefs.15.render","options.columnDefs.16.render","options.columnDefs.17.render","options.columnDefs.18.render","options.columnDefs.19.render","options.columnDefs.20.render","options.columnDefs.21.render","options.columnDefs.22.render","options.columnDefs.23.render","options.columnDefs.24.render","options.columnDefs.25.render","options.columnDefs.26.render","options.columnDefs.27.render","options.columnDefs.28.render","options.columnDefs.29.render","options.columnDefs.30.render","options.columnDefs.31.render","options.columnDefs.32.render","options.columnDefs.33.render","options.columnDefs.34.render","options.columnDefs.35.render","options.columnDefs.36.render","options.columnDefs.37.render","options.columnDefs.38.render","options.columnDefs.39.render","options.columnDefs.40.render","options.columnDefs.41.render","options.columnDefs.42.render","options.columnDefs.43.render","options.columnDefs.44.render","options.columnDefs.45.render","options.columnDefs.46.render","options.columnDefs.47.render"],"jsHooks":[]}</script><p>Now that we have performed multiple jumps, we can plot various profiles. To save time (and code space), let’s create a function for plotting:</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="no">plot_profile</span> <span class="kw">&lt;-</span> <span class="kw">function</span>(<span class="no">profile_data</span>, <span class="no">x_var</span>, <span class="no">y_var</span>) {
  <span class="no">df</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(
    <span class="kw">x_var</span> <span class="kw">=</span> <span class="no">profile_data</span><span class="kw">[[</span><span class="no">x_var</span>]],
    <span class="kw">y_var</span> <span class="kw">=</span> <span class="no">profile_data</span><span class="kw">[[</span><span class="no">y_var</span>]]
  )

  <span class="no">gg</span> <span class="kw">&lt;-</span> <span class="fu">ggplot</span>(<span class="no">df</span>, <span class="fu">aes</span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">x_var</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="no">y_var</span>)) +
    <span class="fu"><a href="https://rdrr.io/pkg/cowplot/man/theme_cowplot.html">theme_cowplot</a></span>(<span class="fl">8</span>) +
    <span class="fu">geom_line</span>(<span class="kw">color</span> <span class="kw">=</span> <span class="st">"blue"</span>) +
    <span class="fu">geom_point</span>(<span class="kw">color</span> <span class="kw">=</span> <span class="st">"blue"</span>) +
    <span class="fu">labs</span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">x_var</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="no">y_var</span>)

  <span class="fu"><a href="https://rdrr.io/r/base/function.html">return</a></span>(<span class="no">gg</span>)
}</pre></body></html></div>
<div id="loadheight-and-loadtov-profile" class="section level2">
<h2 class="hasAnchor">
<a href="#loadheight-and-loadtov-profile" class="anchor"></a>Load~Height and Load~TOV Profile</h2>
<p>The first profile we want to plot is the load~height profile, to see how adding external resistance affects the jump height of this individual athlete:</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="fu">plot_profile</span>(<span class="no">profile_data</span>, <span class="st">"external_load"</span>, <span class="st">"height"</span>)</pre></body></html></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-7-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>Rather than using external load on x-axis, we can use total system load, which is equal to bodyweight plus external load:</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="fu">plot_profile</span>(<span class="no">profile_data</span>, <span class="st">"mass"</span>, <span class="st">"height"</span>)</pre></body></html></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-8-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>As can be seen from both profile, the higher the external load, the lower the jump height. It seems that this profile, or relationship, is curvilinear, although not much. Rather than using height, we can use take-off velocity (TOV):</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="fu">plot_profile</span>(<span class="no">profile_data</span>, <span class="st">"mass"</span>, <span class="st">"take_off_velocity"</span>)</pre></body></html></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-9-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>With this profile, the relationship is more linear. What we want to <em>extract</em> from this profile are the <span class="math inline">\(Mass_0\)</span> and <span class="math inline">\(TOV_0\)</span>, or the points where this profile line, when extended (or extrapolated), cuts the x- and y-axes. It is easier to explain in picture:</p>
<div class="sourceCode" id="cb10"><html><body><pre class="r"><span class="no">lm_model</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span>(<span class="no">take_off_velocity</span> ~ <span class="no">mass</span>, <span class="no">profile_data</span>)

<span class="no">model_data</span> <span class="kw">&lt;-</span> <span class="fu">tibble</span>(
  <span class="kw">mass</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(-<span class="fl">50</span>, <span class="fl">300</span>),
  <span class="kw">predicted_tov</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span>(<span class="no">lm_model</span>, <span class="kw">newdata</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="kw">mass</span> <span class="kw">=</span> <span class="no">mass</span>))
)

<span class="fu">plot_profile</span>(<span class="no">profile_data</span>, <span class="st">"mass"</span>, <span class="st">"take_off_velocity"</span>) +
  <span class="fu">geom_line</span>(<span class="kw">data</span> <span class="kw">=</span> <span class="no">model_data</span>, <span class="fu">aes</span>(<span class="kw">y</span> <span class="kw">=</span> <span class="no">predicted_tov</span>, <span class="kw">x</span> <span class="kw">=</span> <span class="no">mass</span>), <span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0.5</span>, <span class="kw">linetype</span> <span class="kw">=</span> <span class="st">"dashed"</span>) +
  <span class="fu">geom_hline</span>(<span class="kw">yintercept</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="kw">color</span> <span class="kw">=</span> <span class="st">"grey"</span>, <span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0.5</span>) +
  <span class="fu">geom_vline</span>(<span class="kw">xintercept</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="kw">color</span> <span class="kw">=</span> <span class="st">"grey"</span>, <span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0.5</span>)</pre></body></html></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-10-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>We can do that by using <code><a href="../reference/get_FV_profile.html">vjsim::get_FV_profile</a></code> function. <code><a href="../reference/get_FV_profile.html">vjsim::get_FV_profile</a></code> utilizes simple linear regression to model the relationship between two variables (mass and TOV in this case) and spits out few summaries:</p>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="kw pkg">vjsim</span><span class="kw ns">::</span><span class="fu"><a href="../reference/get_FV_profile.html">get_FV_profile</a></span>(
  <span class="kw">profile_data</span> <span class="kw">=</span> <span class="no">profile_data</span>,
  <span class="kw">force</span> <span class="kw">=</span> <span class="st">"mass"</span>,
  <span class="kw">velocity</span> <span class="kw">=</span> <span class="st">"take_off_velocity"</span>
)
<span class="co">#&gt; $F0</span>
<span class="co">#&gt; [1] 265.1471</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $F0_rel</span>
<span class="co">#&gt; [1] 3.535294</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $V0</span>
<span class="co">#&gt; [1] 3.471573</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Pmax</span>
<span class="co">#&gt; [1] 230.1193</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Pmax_rel</span>
<span class="co">#&gt; [1] 3.068258</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Sfv</span>
<span class="co">#&gt; [1] -76.37664</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Sfv_rel</span>
<span class="co">#&gt; [1] -1.018355</span></pre></body></html></div>
<p><code><a href="../reference/get_FV_profile.html">vjsim::get_FV_profile</a></code> assumes force and velocity variables, and thus can be used to calculate max power (‘Pmax’), but nonetheless it can be used in this scenario (but we need to disregard the Pmax; we will use it in another profile). Here, F0 represents <span class="math inline">\(Mass_0\)</span>, and we can see that, according to this profile and linear regression used, it is equal to 260kg. This means that when total load (i.e. total system mass) is equal to 260kg, TOV will be equal to zero. F0_rel is F0 divided by bodyweight (which is saved in the <code>profile_data</code> object). V0 is the hypothetical take-off velocity when total system load is equal to zero. ‘Sfv’ represents the slope of this regression line. Sfv is equal to -74, which means that for every increase in TOV for 1m/s, total system load needs to be decreased by 74kg.</p>
<p>We can apply this profiling to external load rather than total load:</p>
<div class="sourceCode" id="cb12"><html><body><pre class="r"><span class="kw pkg">vjsim</span><span class="kw ns">::</span><span class="fu"><a href="../reference/get_FV_profile.html">get_FV_profile</a></span>(
  <span class="kw">profile_data</span> <span class="kw">=</span> <span class="no">profile_data</span>,
  <span class="kw">force</span> <span class="kw">=</span> <span class="st">"external_load"</span>,
  <span class="kw">velocity</span> <span class="kw">=</span> <span class="st">"take_off_velocity"</span>
)
<span class="co">#&gt; $F0</span>
<span class="co">#&gt; [1] 190.1471</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $F0_rel</span>
<span class="co">#&gt; [1] 2.535294</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $V0</span>
<span class="co">#&gt; [1] 2.489597</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Pmax</span>
<span class="co">#&gt; [1] 118.3474</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Pmax_rel</span>
<span class="co">#&gt; [1] 1.577965</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Sfv</span>
<span class="co">#&gt; [1] -76.37664</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Sfv_rel</span>
<span class="co">#&gt; [1] -1.018355</span></pre></body></html></div>
<p>We can see that now the F0 (or <span class="math inline">\(Mass_0\)</span>) is equal to 185kg. Now V0 is equal to predicted take-off velocity of the bodyweight jump (since that implies zero external load). It is not exactly equal to TOV from the profile table, since this is modeled value.</p>
<p>For Load~Height profile (actually mass~height model), since it is curvilinear, we can use 2nd degree polynomial regression. Before using <code><a href="../reference/get_FV_profile.html">vjsim::get_FV_profile</a></code>, let’s plot the polynomial model and see how it extends beyond profile data (this is needed to be checked since we will calculate <span class="math inline">\(Mass_0\)</span> and <span class="math inline">\(Height_0\)</span>):</p>
<div class="sourceCode" id="cb13"><html><body><pre class="r"><span class="no">lm_model</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span>(<span class="no">height</span> ~ <span class="fu"><a href="https://rdrr.io/r/stats/poly.html">poly</a></span>(<span class="no">mass</span>, <span class="fl">2</span>), <span class="no">profile_data</span>)

<span class="no">model_data</span> <span class="kw">&lt;-</span> <span class="fu">tibble</span>(
  <span class="kw">mass</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(-<span class="fl">10</span>, <span class="fl">250</span>),
  <span class="kw">predicted_height</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span>(<span class="no">lm_model</span>, <span class="kw">newdata</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="kw">mass</span> <span class="kw">=</span> <span class="no">mass</span>))
)

<span class="fu">plot_profile</span>(<span class="no">profile_data</span>, <span class="st">"mass"</span>, <span class="st">"height"</span>) +
  <span class="fu">geom_line</span>(<span class="kw">data</span> <span class="kw">=</span> <span class="no">model_data</span>, <span class="fu">aes</span>(<span class="kw">y</span> <span class="kw">=</span> <span class="no">predicted_height</span>, <span class="kw">x</span> <span class="kw">=</span> <span class="no">mass</span>), <span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0.5</span>, <span class="kw">linetype</span> <span class="kw">=</span> <span class="st">"dashed"</span>) +
  <span class="fu">geom_hline</span>(<span class="kw">yintercept</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="kw">color</span> <span class="kw">=</span> <span class="st">"grey"</span>, <span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0.5</span>) +
  <span class="fu">geom_vline</span>(<span class="kw">xintercept</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="kw">color</span> <span class="kw">=</span> <span class="st">"grey"</span>, <span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0.5</span>)</pre></body></html></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-13-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>The usual problem with polynomial regressions is exactly this extrapolation beyond the data (which is needed to get <span class="math inline">\(Mass_0\)</span> and <span class="math inline">\(Height_0\)</span>). As can be seen from the figure, the 2nd degree polynomial fit never cuts through the x-axis (where Height is equal to 0), and thus <span class="math inline">\(Mass_0\)</span> cannot be computed. Let’s see what happens when using 3rd degree polynomial:</p>
<div class="sourceCode" id="cb14"><html><body><pre class="r"><span class="no">lm_model</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span>(<span class="no">height</span> ~ <span class="fu"><a href="https://rdrr.io/r/stats/poly.html">poly</a></span>(<span class="no">mass</span>, <span class="fl">3</span>), <span class="no">profile_data</span>)

<span class="no">model_data</span> <span class="kw">&lt;-</span> <span class="fu">tibble</span>(
  <span class="kw">mass</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(-<span class="fl">10</span>, <span class="fl">250</span>),
  <span class="kw">predicted_height</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span>(<span class="no">lm_model</span>, <span class="kw">newdata</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="kw">mass</span> <span class="kw">=</span> <span class="no">mass</span>))
)

<span class="fu">plot_profile</span>(<span class="no">profile_data</span>, <span class="st">"mass"</span>, <span class="st">"height"</span>) +
  <span class="fu">geom_line</span>(<span class="kw">data</span> <span class="kw">=</span> <span class="no">model_data</span>, <span class="fu">aes</span>(<span class="kw">y</span> <span class="kw">=</span> <span class="no">predicted_height</span>, <span class="kw">x</span> <span class="kw">=</span> <span class="no">mass</span>), <span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0.5</span>, <span class="kw">linetype</span> <span class="kw">=</span> <span class="st">"dashed"</span>) +
  <span class="fu">geom_hline</span>(<span class="kw">yintercept</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="kw">color</span> <span class="kw">=</span> <span class="st">"grey"</span>, <span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0.5</span>) +
  <span class="fu">geom_vline</span>(<span class="kw">xintercept</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="kw">color</span> <span class="kw">=</span> <span class="st">"grey"</span>, <span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0.5</span>)</pre></body></html></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-14-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>With this 3rd degree polynomial model, <span class="math inline">\(Mass_0\)</span> and <span class="math inline">\(Height_0\)</span> can be computed. We can do that with <code><a href="../reference/get_FV_profile.html">vjsim::get_FV_profile</a></code>, but we will use ‘poly_deg = 3’ argument to fit 3rd degree polynomial regression model:</p>
<div class="sourceCode" id="cb15"><html><body><pre class="r"><span class="kw pkg">vjsim</span><span class="kw ns">::</span><span class="fu"><a href="../reference/get_FV_profile.html">get_FV_profile</a></span>(
  <span class="kw">profile_data</span> <span class="kw">=</span> <span class="no">profile_data</span>,
  <span class="kw">force</span> <span class="kw">=</span> <span class="st">"mass"</span>,
  <span class="kw">velocity</span> <span class="kw">=</span> <span class="st">"height"</span>,
  <span class="kw">poly_deg</span> <span class="kw">=</span> <span class="fl">3</span>
)
<span class="co">#&gt; $F0</span>
<span class="co">#&gt; [1] 225.0424</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $F0_rel</span>
<span class="co">#&gt; [1] 3.000566</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $V0</span>
<span class="co">#&gt; [1] 0.7827555</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Pmax</span>
<span class="co">#&gt; [1] 44.0383</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Pmax_rel</span>
<span class="co">#&gt; [1] 0.5871773</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Sfv</span>
<span class="co">#&gt; [1] -287.5003</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Sfv_rel</span>
<span class="co">#&gt; [1] -3.833337</span></pre></body></html></div>
<p>According to this model, when mass is equal to 215kg, jump height is equal to 0m. In practice, we never tend to use load this high, but load that allows for at least 10-15cm (0.1-0.15m) jump height.</p>
<p>To make this simpler, we can use simple linear regression instead to see how this differs:</p>
<div class="sourceCode" id="cb16"><html><body><pre class="r"><span class="no">lm_model</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span>(<span class="no">height</span> ~ <span class="fu"><a href="https://rdrr.io/r/stats/poly.html">poly</a></span>(<span class="no">mass</span>, <span class="fl">1</span>), <span class="no">profile_data</span>)

<span class="no">model_data</span> <span class="kw">&lt;-</span> <span class="fu">tibble</span>(
  <span class="kw">mass</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(-<span class="fl">10</span>, <span class="fl">250</span>),
  <span class="kw">predicted_height</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span>(<span class="no">lm_model</span>, <span class="kw">newdata</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="kw">mass</span> <span class="kw">=</span> <span class="no">mass</span>))
)

<span class="fu">plot_profile</span>(<span class="no">profile_data</span>, <span class="st">"mass"</span>, <span class="st">"height"</span>) +
  <span class="fu">geom_line</span>(<span class="kw">data</span> <span class="kw">=</span> <span class="no">model_data</span>, <span class="fu">aes</span>(<span class="kw">y</span> <span class="kw">=</span> <span class="no">predicted_height</span>, <span class="kw">x</span> <span class="kw">=</span> <span class="no">mass</span>), <span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0.5</span>, <span class="kw">linetype</span> <span class="kw">=</span> <span class="st">"dashed"</span>) +
  <span class="fu">geom_hline</span>(<span class="kw">yintercept</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="kw">color</span> <span class="kw">=</span> <span class="st">"grey"</span>, <span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0.5</span>) +
  <span class="fu">geom_vline</span>(<span class="kw">xintercept</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="kw">color</span> <span class="kw">=</span> <span class="st">"grey"</span>, <span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0.5</span>)</pre></body></html></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-16-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>And finally calculate <span class="math inline">\(Mass_0\)</span> and <span class="math inline">\(Height_0\)</span>:</p>
<div class="sourceCode" id="cb17"><html><body><pre class="r"><span class="kw pkg">vjsim</span><span class="kw ns">::</span><span class="fu"><a href="../reference/get_FV_profile.html">get_FV_profile</a></span>(
  <span class="kw">profile_data</span> <span class="kw">=</span> <span class="no">profile_data</span>,
  <span class="kw">force</span> <span class="kw">=</span> <span class="st">"mass"</span>,
  <span class="kw">velocity</span> <span class="kw">=</span> <span class="st">"height"</span>
)
<span class="co">#&gt; $F0</span>
<span class="co">#&gt; [1] 198.4972</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $F0_rel</span>
<span class="co">#&gt; [1] 2.646629</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $V0</span>
<span class="co">#&gt; [1] 0.4910784</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Pmax</span>
<span class="co">#&gt; [1] 24.36942</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Pmax_rel</span>
<span class="co">#&gt; [1] 0.3249256</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Sfv</span>
<span class="co">#&gt; [1] -404.2066</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Sfv_rel</span>
<span class="co">#&gt; [1] -5.389422</span></pre></body></html></div>
<p>From these few examples, we can see how profiling depends on the variables used, as well as the models used (i.e. polynomial or linear regression) and thus how can the (extrapolated) parameters differ.</p>
<p>From a simulation perspective, we would be interested to see if <span class="math inline">\(F_0\)</span> and <span class="math inline">\(V_0\)</span> can be used to infer <em>underlying</em> (or latent or hidden) Force Generator <code>max_force</code> and <code>max_velocity</code> characteristics. I will explore this in <a href="https://mladenjovanovic.github.io/vjsim/articles/exploring-vjsim.html">Exploring</a> vignette. For now let’s explore other profiles.</p>
</div>
<div id="mean-forcemean-velocity-profile" class="section level2">
<h2 class="hasAnchor">
<a href="#mean-forcemean-velocity-profile" class="anchor"></a>Mean Force~Mean Velocity Profile</h2>
<p>Instead of using mass or external load, we can use mean ground reaction force (GRF) over distance<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a> with mean velocity. Why mean GRF over distance and not over time? Because using mean GRF over distance give correct results for work and thus power calculus, while mean GRF over time does not (but can be used to calculate impulse).</p>
<p>Let’s plot the relationship:</p>
<div class="sourceCode" id="cb18"><html><body><pre class="r"><span class="fu">plot_profile</span>(<span class="no">profile_data</span>, <span class="st">"mean_GRF_over_distance"</span>, <span class="st">"mean_velocity"</span>)</pre></body></html></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-18-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>As can be seen from the above figure, from the data simulated using <code>vjsim</code>, it seems that this relationship is not linear, but curvilinear. We do tend to model it with simple linear regression.</p>
<div class="sourceCode" id="cb19"><html><body><pre class="r"><span class="no">lm_model</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span>(<span class="no">mean_velocity</span> ~ <span class="fu"><a href="https://rdrr.io/r/stats/poly.html">poly</a></span>(<span class="no">mean_GRF_over_distance</span>, <span class="fl">1</span>), <span class="no">profile_data</span>)

<span class="no">model_data</span> <span class="kw">&lt;-</span> <span class="fu">tibble</span>(
  <span class="kw">mean_GRF_over_distance</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(-<span class="fl">50</span>, <span class="fl">3500</span>),
  <span class="kw">predicted_mv</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span>(<span class="no">lm_model</span>, <span class="kw">newdata</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="kw">mean_GRF_over_distance</span> <span class="kw">=</span> <span class="no">mean_GRF_over_distance</span>))
)

<span class="fu">plot_profile</span>(<span class="no">profile_data</span>, <span class="st">"mean_GRF_over_distance"</span>, <span class="st">"mean_velocity"</span>) +
  <span class="fu">geom_line</span>(<span class="kw">data</span> <span class="kw">=</span> <span class="no">model_data</span>, <span class="fu">aes</span>(<span class="kw">y</span> <span class="kw">=</span> <span class="no">predicted_mv</span>, <span class="kw">x</span> <span class="kw">=</span> <span class="no">mean_GRF_over_distance</span>), <span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0.5</span>, <span class="kw">linetype</span> <span class="kw">=</span> <span class="st">"dashed"</span>) +
  <span class="fu">geom_hline</span>(<span class="kw">yintercept</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="kw">color</span> <span class="kw">=</span> <span class="st">"grey"</span>, <span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0.5</span>) +
  <span class="fu">geom_vline</span>(<span class="kw">xintercept</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="kw">color</span> <span class="kw">=</span> <span class="st">"grey"</span>, <span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0.5</span>)</pre></body></html></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-19-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>The extracted <span class="math inline">\(F_0\)</span> and <span class="math inline">\(V_0\)</span> are the following:</p>
<div class="sourceCode" id="cb20"><html><body><pre class="r"><span class="kw pkg">vjsim</span><span class="kw ns">::</span><span class="fu"><a href="../reference/get_FV_profile.html">get_FV_profile</a></span>(
  <span class="kw">profile_data</span> <span class="kw">=</span> <span class="no">profile_data</span>,
  <span class="kw">force</span> <span class="kw">=</span> <span class="st">"mean_GRF_over_distance"</span>,
  <span class="kw">velocity</span> <span class="kw">=</span> <span class="st">"mean_velocity"</span>
)
<span class="co">#&gt; $F0</span>
<span class="co">#&gt; [1] 3254.314</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $F0_rel</span>
<span class="co">#&gt; [1] 43.39085</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $V0</span>
<span class="co">#&gt; [1] 2.021105</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Pmax</span>
<span class="co">#&gt; [1] 1644.327</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Pmax_rel</span>
<span class="co">#&gt; [1] 21.92436</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Sfv</span>
<span class="co">#&gt; [1] -1610.166</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Sfv_rel</span>
<span class="co">#&gt; [1] -21.46888</span></pre></body></html></div>
<p>If you remember from simulation parameters, Force Generator max force was set to 3000N and max velocity to 4m/s. From this simple example, we can see that <em>manifested</em> F-V relationship doesn’t uncover <em>latent</em> force generator characteristic. This will be further explored in another vignette.</p>
<p>From <span class="math inline">\(F_0\)</span> and <span class="math inline">\(V_0\)</span> we can calculate <span class="math inline">\(P_{max}\)</span>, which is equal to <span class="math inline">\(\frac{F_0 \times V_0}{4}\)</span> (assuming linear relationship). Let’s see what happens when we use 2nd degree polynomial fit:</p>
<div class="sourceCode" id="cb21"><html><body><pre class="r"><span class="no">lm_model</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span>(<span class="no">mean_velocity</span> ~ <span class="fu"><a href="https://rdrr.io/r/stats/poly.html">poly</a></span>(<span class="no">mean_GRF_over_distance</span>, <span class="fl">2</span>), <span class="no">profile_data</span>)

<span class="no">model_data</span> <span class="kw">&lt;-</span> <span class="fu">tibble</span>(
  <span class="kw">mean_GRF_over_distance</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(-<span class="fl">50</span>, <span class="fl">3500</span>),
  <span class="kw">predicted_mv</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span>(<span class="no">lm_model</span>, <span class="kw">newdata</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="kw">mean_GRF_over_distance</span> <span class="kw">=</span> <span class="no">mean_GRF_over_distance</span>))
)

<span class="fu">plot_profile</span>(<span class="no">profile_data</span>, <span class="st">"mean_GRF_over_distance"</span>, <span class="st">"mean_velocity"</span>) +
  <span class="fu">geom_line</span>(<span class="kw">data</span> <span class="kw">=</span> <span class="no">model_data</span>, <span class="fu">aes</span>(<span class="kw">y</span> <span class="kw">=</span> <span class="no">predicted_mv</span>, <span class="kw">x</span> <span class="kw">=</span> <span class="no">mean_GRF_over_distance</span>), <span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0.5</span>, <span class="kw">linetype</span> <span class="kw">=</span> <span class="st">"dashed"</span>) +
  <span class="fu">geom_hline</span>(<span class="kw">yintercept</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="kw">color</span> <span class="kw">=</span> <span class="st">"grey"</span>, <span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0.5</span>) +
  <span class="fu">geom_vline</span>(<span class="kw">xintercept</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="kw">color</span> <span class="kw">=</span> <span class="st">"grey"</span>, <span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0.5</span>)</pre></body></html></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-21-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>The extracted <span class="math inline">\(F_0\)</span> and <span class="math inline">\(V_0\)</span> are now equal to:</p>
<div class="sourceCode" id="cb22"><html><body><pre class="r"><span class="kw pkg">vjsim</span><span class="kw ns">::</span><span class="fu"><a href="../reference/get_FV_profile.html">get_FV_profile</a></span>(
  <span class="kw">profile_data</span> <span class="kw">=</span> <span class="no">profile_data</span>,
  <span class="kw">force</span> <span class="kw">=</span> <span class="st">"mean_GRF_over_distance"</span>,
  <span class="kw">velocity</span> <span class="kw">=</span> <span class="st">"mean_velocity"</span>,
  <span class="kw">poly_deg</span> <span class="kw">=</span> <span class="fl">2</span>
)
<span class="co">#&gt; $F0</span>
<span class="co">#&gt; [1] 2716.435</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $F0_rel</span>
<span class="co">#&gt; [1] 36.21914</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $V0</span>
<span class="co">#&gt; [1] 1.095512</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Pmax</span>
<span class="co">#&gt; [1] 743.9716</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Pmax_rel</span>
<span class="co">#&gt; [1] 9.919622</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Sfv</span>
<span class="co">#&gt; [1] -2479.604</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Sfv_rel</span>
<span class="co">#&gt; [1] -33.06139</span></pre></body></html></div>
<p>And if we use 3rd degree polynomial fit:</p>
<div class="sourceCode" id="cb23"><html><body><pre class="r"><span class="no">lm_model</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span>(<span class="no">mean_velocity</span> ~ <span class="fu"><a href="https://rdrr.io/r/stats/poly.html">poly</a></span>(<span class="no">mean_GRF_over_distance</span>, <span class="fl">3</span>), <span class="no">profile_data</span>)

<span class="no">model_data</span> <span class="kw">&lt;-</span> <span class="fu">tibble</span>(
  <span class="kw">mean_GRF_over_distance</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(-<span class="fl">50</span>, <span class="fl">3500</span>),
  <span class="kw">predicted_mv</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span>(<span class="no">lm_model</span>, <span class="kw">newdata</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="kw">mean_GRF_over_distance</span> <span class="kw">=</span> <span class="no">mean_GRF_over_distance</span>))
)

<span class="fu">plot_profile</span>(<span class="no">profile_data</span>, <span class="st">"mean_GRF_over_distance"</span>, <span class="st">"mean_velocity"</span>) +
  <span class="fu">geom_line</span>(<span class="kw">data</span> <span class="kw">=</span> <span class="no">model_data</span>, <span class="fu">aes</span>(<span class="kw">y</span> <span class="kw">=</span> <span class="no">predicted_mv</span>, <span class="kw">x</span> <span class="kw">=</span> <span class="no">mean_GRF_over_distance</span>), <span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0.5</span>, <span class="kw">linetype</span> <span class="kw">=</span> <span class="st">"dashed"</span>) +
  <span class="fu">geom_hline</span>(<span class="kw">yintercept</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="kw">color</span> <span class="kw">=</span> <span class="st">"grey"</span>, <span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0.5</span>) +
  <span class="fu">geom_vline</span>(<span class="kw">xintercept</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="kw">color</span> <span class="kw">=</span> <span class="st">"grey"</span>, <span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0.5</span>)</pre></body></html></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-23-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>The extracted <span class="math inline">\(F_0\)</span> and <span class="math inline">\(V_0\)</span> are now equal to:</p>
<div class="sourceCode" id="cb24"><html><body><pre class="r"><span class="kw pkg">vjsim</span><span class="kw ns">::</span><span class="fu"><a href="../reference/get_FV_profile.html">get_FV_profile</a></span>(
  <span class="kw">profile_data</span> <span class="kw">=</span> <span class="no">profile_data</span>,
  <span class="kw">force</span> <span class="kw">=</span> <span class="st">"mean_GRF_over_distance"</span>,
  <span class="kw">velocity</span> <span class="kw">=</span> <span class="st">"mean_velocity"</span>,
  <span class="kw">poly_deg</span> <span class="kw">=</span> <span class="fl">3</span>
)
<span class="co">#&gt; $F0</span>
<span class="co">#&gt; [1] 2611.936</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $F0_rel</span>
<span class="co">#&gt; [1] 34.82582</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $V0</span>
<span class="co">#&gt; [1] 1.966336</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Pmax</span>
<span class="co">#&gt; [1] 1283.986</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Pmax_rel</span>
<span class="co">#&gt; [1] 17.11982</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Sfv</span>
<span class="co">#&gt; [1] -1328.326</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Sfv_rel</span>
<span class="co">#&gt; [1] -17.71102</span></pre></body></html></div>
<p>As can be seen from the examples above, each model fit provides different estimates for <span class="math inline">\(F_0\)</span> and <span class="math inline">\(V_0\)</span> (using <code>vjsim</code> data), but we do tend to represent it with simple linear regression. As can be seen from estimated <span class="math inline">\(F_0\)</span> and <span class="math inline">\(V_0\)</span>, they do not seem to recover Force Generator max force and max velocity.</p>
</div>
<div id="mean-forcetov" class="section level2">
<h2 class="hasAnchor">
<a href="#mean-forcetov" class="anchor"></a>Mean Force~TOV</h2>
<p>This profile is the basis for the <a href="https://mladenjovanovic.github.io/vjsim/articles/optimization-vjsim.html">Samozino optimization model</a> (although Samozino uses TOV/2 as a practical way to calculate mean velocity - see <em>Optimization vignette</em>) . It plots mean force against take-off velocity:</p>
<div class="sourceCode" id="cb25"><html><body><pre class="r"><span class="fu">plot_profile</span>(<span class="no">profile_data</span>, <span class="st">"mean_GRF_over_distance"</span>, <span class="st">"take_off_velocity"</span>)</pre></body></html></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-25-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>This profile will be further explored in the next vignette.</p>
</div>
<div id="mean-forcemean-power-profile" class="section level2">
<h2 class="hasAnchor">
<a href="#mean-forcemean-power-profile" class="anchor"></a>Mean Force~Mean Power Profile</h2>
<p>As seen from the Mean Force~Mean Velocity Profile, <span class="math inline">\(P_{max}\)</span> can be calculated using <span class="math inline">\(F_0\)</span> and <span class="math inline">\(V_0\)</span>. But rather than estimating it, we can actually plot it, since we have that data available from <code>vjsim</code> and in our profiling data frame:</p>
<div class="sourceCode" id="cb26"><html><body><pre class="r"><span class="fu">plot_profile</span>(<span class="no">profile_data</span>, <span class="st">"mean_GRF_over_distance"</span>, <span class="st">"mean_power"</span>)</pre></body></html></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-26-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>Also, rather than using mean GRF over distance for power profile, we can also use mass and external load:</p>
<div class="sourceCode" id="cb27"><html><body><pre class="r"><span class="fu">plot_profile</span>(<span class="no">profile_data</span>, <span class="st">"external_load"</span>, <span class="st">"mean_power"</span>)</pre></body></html></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-27-1.png" width="90%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb28"><html><body><pre class="r"><span class="fu">plot_profile</span>(<span class="no">profile_data</span>, <span class="st">"mass"</span>, <span class="st">"mean_power"</span>)</pre></body></html></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-28-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>This is a typical power profile. We can fit 2nd degree polynomial fit to these data points (using mean GRF over distance):</p>
<div class="sourceCode" id="cb29"><html><body><pre class="r"><span class="no">lm_model</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span>(<span class="no">mean_power</span> ~ <span class="fu"><a href="https://rdrr.io/r/stats/poly.html">poly</a></span>(<span class="no">mean_GRF_over_distance</span>, <span class="fl">2</span>), <span class="no">profile_data</span>)

<span class="no">model_data</span> <span class="kw">&lt;-</span> <span class="fu">tibble</span>(
  <span class="kw">mean_GRF_over_distance</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(-<span class="fl">50</span>, <span class="fl">3500</span>),
  <span class="kw">predicted_mp</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span>(<span class="no">lm_model</span>, <span class="kw">newdata</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="kw">mean_GRF_over_distance</span> <span class="kw">=</span> <span class="no">mean_GRF_over_distance</span>))
)

<span class="fu">plot_profile</span>(<span class="no">profile_data</span>, <span class="st">"mean_GRF_over_distance"</span>, <span class="st">"mean_power"</span>) +
  <span class="fu">geom_line</span>(<span class="kw">data</span> <span class="kw">=</span> <span class="no">model_data</span>, <span class="fu">aes</span>(<span class="kw">y</span> <span class="kw">=</span> <span class="no">predicted_mp</span>, <span class="kw">x</span> <span class="kw">=</span> <span class="no">mean_GRF_over_distance</span>), <span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0.5</span>, <span class="kw">linetype</span> <span class="kw">=</span> <span class="st">"dashed"</span>) +
  <span class="fu">geom_hline</span>(<span class="kw">yintercept</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="kw">color</span> <span class="kw">=</span> <span class="st">"grey"</span>, <span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0.5</span>) +
  <span class="fu">geom_vline</span>(<span class="kw">xintercept</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="kw">color</span> <span class="kw">=</span> <span class="st">"grey"</span>, <span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0.5</span>)</pre></body></html></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-29-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>From this curve we can extract (or predict) mean <span class="math inline">\(P_{max}\)</span>. For that reason there is <code><a href="../reference/get_power_profile.html">vjsim::get_power_profile</a></code> function:</p>
<div class="sourceCode" id="cb30"><html><body><pre class="r"><span class="kw pkg">vjsim</span><span class="kw ns">::</span><span class="fu"><a href="../reference/get_power_profile.html">get_power_profile</a></span>(
  <span class="kw">profile_data</span> <span class="kw">=</span> <span class="no">profile_data</span>,
  <span class="kw">x_var</span> <span class="kw">=</span> <span class="st">"mean_GRF_over_distance"</span>,
  <span class="kw">power</span> <span class="kw">=</span> <span class="st">"mean_power"</span>
)
<span class="co">#&gt; $Pmax</span>
<span class="co">#&gt; [1] 1676.722</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Pmax_rel</span>
<span class="co">#&gt; [1] 22.3563</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Pmax_location</span>
<span class="co">#&gt; [1] 1649.136</span></pre></body></html></div>
<p>As can be checked, this <span class="math inline">\(P_{max}\)</span> and <span class="math inline">\(P_{max}\)</span> estimated using <span class="math inline">\(F_0\)</span> and <span class="math inline">\(V_0\)</span> (using simple linear regression) is not that different.</p>
<p>According to Maximum Dynamic Output Hypothesis, this peak in mean power (i.e. <span class="math inline">\(P_{max}\)</span>) happens at one’s own bodyweight<span class="citation">(Jaric and Markovic <a href="#ref-jaricLegMusclesDesign2009" role="doc-biblioref">2009</a>)</span>:</p>
<blockquote>
<p>Specifically, here we show that the optimal load for the power and momentum production in vertical jumping in habitually active individuals (but not in strength/power-trained athletes) could be the subject’s own body.</p>
</blockquote>
<p>But as can be seen, this is not the case in <code>vjsim</code> simulation. I personally see Power as <em>operationalist</em>, not <em>realist</em> <span class="citation">(Borsboom <a href="#ref-borsboomMeasuringMindConceptual2009" role="doc-biblioref">2009</a>)</span>. In other words, it is just a mathematics not some magical latent property of the Force Generator.</p>
</div>
<div id="using-peak-rather-than-mean-values" class="section level2">
<h2 class="hasAnchor">
<a href="#using-peak-rather-than-mean-values" class="anchor"></a>Using Peak rather than Mean values</h2>
<p>For far we have used mean force and mean velocity, as well as mean power. We can instead use peak values instead. Here is a profile between peak GRF and peak velocity<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a>:</p>
<div class="sourceCode" id="cb31"><html><body><pre class="r"><span class="fu">plot_profile</span>(<span class="no">profile_data</span>, <span class="st">"peak_GRF"</span>, <span class="st">"peak_velocity"</span>)</pre></body></html></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-31-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>We can also extract <span class="math inline">\(F_0\)</span> and <span class="math inline">\(V_0\)</span> from this relationship (using simple linear regression model):</p>
<div class="sourceCode" id="cb32"><html><body><pre class="r"><span class="kw pkg">vjsim</span><span class="kw ns">::</span><span class="fu"><a href="../reference/get_FV_profile.html">get_FV_profile</a></span>(
  <span class="kw">profile_data</span> <span class="kw">=</span> <span class="no">profile_data</span>,
  <span class="kw">force</span> <span class="kw">=</span> <span class="st">"peak_GRF"</span>,
  <span class="kw">velocity</span> <span class="kw">=</span> <span class="st">"peak_velocity"</span>
)
<span class="co">#&gt; $F0</span>
<span class="co">#&gt; [1] 3113.143</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $F0_rel</span>
<span class="co">#&gt; [1] 41.50857</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $V0</span>
<span class="co">#&gt; [1] 6.457276</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Pmax</span>
<span class="co">#&gt; [1] 5025.605</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Pmax_rel</span>
<span class="co">#&gt; [1] 67.00807</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Sfv</span>
<span class="co">#&gt; [1] -482.1139</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Sfv_rel</span>
<span class="co">#&gt; [1] -6.428186</span></pre></body></html></div>
<p>Let’s check the peak power profile:</p>
<div class="sourceCode" id="cb33"><html><body><pre class="r"><span class="fu">plot_profile</span>(<span class="no">profile_data</span>, <span class="st">"peak_GRF"</span>, <span class="st">"peak_power"</span>)</pre></body></html></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-33-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>And if we want to extract the peak value (i.e. peak value of the peak power):</p>
<div class="sourceCode" id="cb34"><html><body><pre class="r"><span class="kw pkg">vjsim</span><span class="kw ns">::</span><span class="fu"><a href="../reference/get_power_profile.html">get_power_profile</a></span>(
  <span class="kw">profile_data</span> <span class="kw">=</span> <span class="no">profile_data</span>,
  <span class="kw">x_var</span> <span class="kw">=</span> <span class="st">"peak_GRF"</span>,
  <span class="kw">power</span> <span class="kw">=</span> <span class="st">"peak_power"</span>
)
<span class="co">#&gt; $Pmax</span>
<span class="co">#&gt; [1] 3027.243</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Pmax_rel</span>
<span class="co">#&gt; [1] 40.36324</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Pmax_location</span>
<span class="co">#&gt; [1] 2074.24</span></pre></body></html></div>
<p>There are numerous profiles that could be created in <code>vjsim</code> (and with real data). Function <code><a href="../reference/get_all_profiles.html">vjsim::get_all_profiles</a></code> runs the most common profiles and returns their results (in a list and a data frame):</p>
<div class="sourceCode" id="cb35"><html><body><pre class="r"><span class="no">all_profiles</span> <span class="kw">&lt;-</span> <span class="kw pkg">vjsim</span><span class="kw ns">::</span><span class="fu"><a href="../reference/get_all_profiles.html">get_all_profiles</a></span>(
  <span class="kw">profile_data</span> <span class="kw">=</span> <span class="no">profile_data</span>
)

<span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html">datatable</a></span>(<span class="no">all_profiles</span>$<span class="no">data_frame</span>, <span class="kw">rownames</span> <span class="kw">=</span> <span class="fl">FALSE</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/DT/man/formatCurrency.html">formatRound</a></span>(<span class="kw">columns</span> <span class="kw">=</span> <span class="fl">1</span>:<span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span>(<span class="no">all_profiles</span>$<span class="no">data_frame</span>), <span class="kw">digits</span> <span class="kw">=</span> <span class="fl">2</span>)</pre></body></html></div>
<div id="htmlwidget-6ad6b0da8dda8c4f0c7a" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-6ad6b0da8dda8c4f0c7a">{"x":{"filter":"none","data":[["Mean Force ~ Mean Velocity Profile","Mean Force ~ Mean Velocity Profile","Mean Force ~ Mean Velocity Profile","Mean Force ~ Mean Velocity Profile","Mean Force ~ Mean Velocity Profile","Mean Force ~ Mean Velocity Profile","Mean Force ~ Mean Velocity Profile","Mean Power ~ Mean Force Profile","Mean Power ~ Mean Force Profile","Mean Power ~ Mean Force Profile","Mean Power ~ Mean Force Profile","Peak Force ~ Peak Velocity Profile","Peak Force ~ Peak Velocity Profile","Peak Force ~ Peak Velocity Profile","Peak Force ~ Peak Velocity Profile","Peak Force ~ Peak Velocity Profile","Peak Force ~ Peak Velocity Profile","Peak Force ~ Peak Velocity Profile","Peak Power ~ Peak Force Profile","Peak Power ~ Peak Force Profile","Peak Power ~ Peak Force Profile","Peak Power ~ Peak Force Profile","Load ~ Take-off Velocity Profile","Load ~ Take-off Velocity Profile","Load ~ Take-off Velocity Profile","Load ~ Take-off Velocity Profile","Load ~ Take-off Velocity Profile","Load ~ Take-off Velocity Profile","Load ~ Take-off Velocity Profile","Impulse ~ Load Profile","Impulse ~ Load Profile","Impulse ~ Load Profile","Impulse ~ Load Profile"],["F0","F0_rel","V0","Pmax","Pmax_rel","Sfv","Sfv_rel","Pmax","Pmax_rel","Pmax_location","F0_perc","F0","F0_rel","V0","Pmax","Pmax_rel","Sfv","Sfv_rel","Pmax","Pmax_rel","Pmax_location","F0_perc","V0","L0","L0_rel","Imax","Imax_rel","Slv","Slv_rel","Imax","Imax_rel","Imax_location","L0_perc"],[3254.31395034112,43.3908526712149,2.02110478027624,1644.32737038852,21.9243649385136,-1610.16587665303,-21.4688783553737,1676.72224764211,22.3562966352282,1649.13563486021,0.506753699865788,3113.14264951829,41.5085686602438,6.45727591445923,5025.60526225255,67.0080701633673,-482.113927104662,-6.42818569472883,3027.24336546154,40.3632448728206,2074.23996885707,0.666284909616341,3.47157281446385,265.147072494855,3.5352942999314,230.119342176954,3.06825789569272,-76.3766415585912,-1.01835522078122,227.46033193384,3.03280442578453,135.328323927466,0.510389659045138]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>profile<\/th>\n      <th>metric<\/th>\n      <th>value<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"targets":0,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":1,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":2,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"className":"dt-right","targets":2}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":["options.columnDefs.0.render","options.columnDefs.1.render","options.columnDefs.2.render"],"jsHooks":[]}</script>
</div>
</div>
<div id="probing-profiles" class="section level1">
<h1 class="hasAnchor">
<a href="#probing-profiles" class="anchor"></a>Probing profiles</h1>
<p>As explained in the previous vignettes, probing means checking for sensitivity when Force Generator characteristics change. This implies changing one characteristic, while keeping all the others the same, and repeating this process for all other characteristics (or parameters). In the previous vignette we have probed how Force Generator characteristics affect single bodyweight jump performance, but now we are interested to see how profile characteristics are affected.</p>
<p>To do probing we can use <code><a href="../reference/probe_profile.html">vjsim::probe_profile</a></code> function. Let’s probe the mass~take-off velocity profile:</p>
<div class="sourceCode" id="cb36"><html><body><pre class="r"><span class="no">probe_data</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/probe_profile.html">probe_profile</a></span>(
  <span class="kw">mass</span> <span class="kw">=</span> <span class="fl">75</span>,
  <span class="kw">max_force</span> <span class="kw">=</span> <span class="fl">3000</span>,
  <span class="kw">max_velocity</span> <span class="kw">=</span> <span class="fl">4</span>,
  <span class="kw">time_to_max_activation</span> <span class="kw">=</span> <span class="fl">0.3</span>,
  <span class="kw">time_step</span> <span class="kw">=</span> <span class="fl">0.001</span>,
  <span class="kw">external_load</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>, <span class="fl">20</span>, <span class="fl">40</span>, <span class="fl">60</span>, <span class="fl">80</span>, <span class="fl">100</span>),
  <span class="kw">change_ratio</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="fl">0.9</span>, <span class="fl">1.1</span>, <span class="kw">length.out</span> <span class="kw">=</span> <span class="fl">3</span>),

  <span class="co"># Profile variables</span>
  <span class="kw">profile_func</span> <span class="kw">=</span> <span class="kw">function</span>(<span class="no">...</span>) {
    <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">list</span> <span class="kw">=</span> <span class="fu"><a href="../reference/get_FV_profile.html">get_FV_profile</a></span>(
      <span class="no">...</span>,
      <span class="kw">force</span> <span class="kw">=</span> <span class="st">"mass"</span>,
      <span class="kw">velocity</span> <span class="kw">=</span> <span class="st">"take_off_velocity"</span>
    ))
  },
  <span class="kw">aggregate</span> <span class="kw">=</span> <span class="st">"ratio"</span>
)

<span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html">datatable</a></span>(<span class="no">probe_data</span>, <span class="kw">rownames</span> <span class="kw">=</span> <span class="fl">FALSE</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/DT/man/formatCurrency.html">formatRound</a></span>(<span class="kw">columns</span> <span class="kw">=</span> <span class="fl">1</span>:<span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span>(<span class="no">probe_data</span>), <span class="kw">digits</span> <span class="kw">=</span> <span class="fl">2</span>)</pre></body></html></div>
<div id="htmlwidget-ba8cf276df5d1891aa89" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-ba8cf276df5d1891aa89">{"x":{"filter":"none","data":[[0.9,1,1.1,0.9,1,1.1,0.9,1,1.1,0.9,1,1.1,0.9,1,1.1],["mass","mass","mass","push_off_distance","push_off_distance","push_off_distance","max_force","max_force","max_force","max_velocity","max_velocity","max_velocity","time_to_max_activation","time_to_max_activation","time_to_max_activation"],[67.5,75,82.5,75,75,75,75,75,75,75,75,75,75,75,75],[0.4,0.4,0.4,0.36,0.4,0.44,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4],[3000,3000,3000,3000,3000,3000,2700,3000,3300,3000,3000,3000,3000,3000,3000],[4,4,4,4,4,4,4,4,4,3.6,4,4.4,4,4,4],[0.3,0.3,0.3,0.3,0.3,0.3,0.3,0.3,0.3,0.3,0.3,0.3,0.27,0.3,0.33],[0.001,0.001,0.001,0.001,0.001,0.001,0.001,0.001,0.001,0.001,0.001,0.001,0.001,0.001,0.001],[0.986101636243979,1,1.01157384719942,1.00785929086448,1,0.99506371183346,0.916246021474274,1,1.07786049267005,0.998735818840154,1,0.998819968799178,1.00048237818976,1,0.999766425952152],[1.09566848471553,1,0.919612588363109,1.00785929086448,1,0.99506371183346,0.916246021474274,1,1.07786049267005,0.998735818840154,1,0.998819968799178,1.00048237818976,1,0.999766425952152],[1.01173055186903,1,0.987603085171017,0.976156974113761,1,1.01588348416791,0.98302692839071,1,1.01486084690217,0.93473837274409,1,1.05629529150752,0.999983191709034,1,0.999580961478844],[0.997669152636074,1,0.999033452372462,0.983828875702709,1,1.01086879054643,0.900694512140064,1,1.09387841243352,0.933556694103881,1,1.05504883010626,1.00046556179084,1,0.99934748530752],[1.10852128070675,1,0.908212229429511,0.983828875702709,1,1.01086879054643,0.900694512140064,1,1.09387841243352,0.933556694103881,1,1.05504883010626,1.00046556179084,1,0.99934748530752],[0.974668239900728,1,1.02427165567658,1.0324766585615,1,0.979505747795968,0.932066045204111,1,1.06207712708612,1.06846562413843,1,0.945587826462509,1.00049919487134,1,1.00018554222265],[1.08296471100081,1,0.931156050615077,1.0324766585615,1,0.979505747795968,0.932066045204112,1,1.06207712708612,1.06846562413843,1,0.945587826462509,1.00049919487134,1,1.00018554222265]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>change_ratio<\/th>\n      <th>probing<\/th>\n      <th>mass<\/th>\n      <th>push_off_distance<\/th>\n      <th>max_force<\/th>\n      <th>max_velocity<\/th>\n      <th>time_to_max_activation<\/th>\n      <th>time_step<\/th>\n      <th>F0<\/th>\n      <th>F0_rel<\/th>\n      <th>V0<\/th>\n      <th>Pmax<\/th>\n      <th>Pmax_rel<\/th>\n      <th>Sfv<\/th>\n      <th>Sfv_rel<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"targets":0,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":1,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":2,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":3,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":4,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":5,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":6,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":7,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":8,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":9,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":10,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":11,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":12,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":13,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"targets":14,"render":"function(data, type, row, meta) { return DTWidget.formatRound(data, 2, 3, \",\", \".\"); }"},{"className":"dt-right","targets":[0,2,3,4,5,6,7,8,9,10,11,12,13,14]}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":["options.columnDefs.0.render","options.columnDefs.1.render","options.columnDefs.2.render","options.columnDefs.3.render","options.columnDefs.4.render","options.columnDefs.5.render","options.columnDefs.6.render","options.columnDefs.7.render","options.columnDefs.8.render","options.columnDefs.9.render","options.columnDefs.10.render","options.columnDefs.11.render","options.columnDefs.12.render","options.columnDefs.13.render","options.columnDefs.14.render"],"jsHooks":[]}</script><p>Plotting the probing data will convey more information. To avoid repeating the same code, let’s write a plotting function.</p>
<div class="sourceCode" id="cb37"><html><body><pre class="r"><span class="co"># Need this package to label the lines</span>
<span class="co"># install.packages("directlabels")</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">require</a></span>(<span class="no">directlabels</span>)

<span class="no">plot_probe</span> <span class="kw">&lt;-</span> <span class="kw">function</span>(<span class="no">probing_data</span>) {
  <span class="co"># Convert to long</span>
  <span class="no">probe_data</span> <span class="kw">&lt;-</span> <span class="fu">gather</span>(<span class="no">probe_data</span>, <span class="kw">key</span> <span class="kw">=</span> <span class="st">"variable"</span>, <span class="kw">value</span> <span class="kw">=</span> <span class="st">"value"</span>, -(<span class="fl">1</span>:<span class="fl">8</span>))

  <span class="no">gg</span> <span class="kw">&lt;-</span> <span class="fu">ggplot</span>(
    <span class="no">probe_data</span>,
    <span class="fu">aes</span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">change_ratio</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="no">value</span>, <span class="kw">color</span> <span class="kw">=</span> <span class="no">probing</span>)
  ) +
    <span class="fu"><a href="https://rdrr.io/pkg/cowplot/man/theme_cowplot.html">theme_cowplot</a></span>(<span class="fl">6</span>) +
    <span class="fu">geom_line</span>() +
    <span class="fu">facet_wrap</span>(~<span class="no">variable</span>, <span class="kw">scales</span> <span class="kw">=</span> <span class="st">"free_y"</span>) +
    <span class="fu">xlab</span>(<span class="st">"Normalized parameter change"</span>) +
    <span class="fu">ylab</span>(<span class="st">"Normalized profile change"</span>) +
    <span class="fu">scale_color_manual</span>(<span class="kw">values</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(
      <span class="st">"mass"</span> <span class="kw">=</span> <span class="st">"#4D4D4D"</span>,
      <span class="st">"max_force"</span> <span class="kw">=</span> <span class="st">"#5DA5DA"</span>,
      <span class="st">"max_velocity"</span> <span class="kw">=</span>  <span class="st">"#FAA43A"</span>,
      <span class="st">"push_off_distance"</span> <span class="kw">=</span> <span class="st">"#60BD68"</span>,
      <span class="st">"time_to_max_activation"</span> <span class="kw">=</span> <span class="st">"#B276B2"</span>
    )) +
    <span class="fu"><a href="https://rdrr.io/r/graphics/plot.window.html">xlim</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.9</span>, <span class="fl">1.2</span>))

  <span class="no">fgen_facets</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/directlabels/man/direct.label.html">direct.label</a></span>(<span class="no">gg</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"last.bumpup"</span>, <span class="kw">cex</span> <span class="kw">=</span> <span class="fl">0.4</span>))

  <span class="no">gg</span> <span class="kw">&lt;-</span> <span class="fu">ggplot</span>(
    <span class="no">probe_data</span>,
    <span class="fu">aes</span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">change_ratio</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="no">value</span>, <span class="kw">color</span> <span class="kw">=</span> <span class="no">variable</span>)
  ) +
    <span class="fu"><a href="https://rdrr.io/pkg/cowplot/man/theme_cowplot.html">theme_cowplot</a></span>(<span class="fl">8</span>) +
    <span class="fu">geom_line</span>() +
    <span class="fu">facet_wrap</span>(~<span class="no">probing</span>, <span class="kw">scales</span> <span class="kw">=</span> <span class="st">"free_y"</span>) +
    <span class="fu">xlab</span>(<span class="st">"Normalized parameter change"</span>) +
    <span class="fu">ylab</span>(<span class="st">"Normalized profile change"</span>) +
    <span class="fu"><a href="https://rdrr.io/r/graphics/plot.window.html">xlim</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.9</span>, <span class="fl">1.2</span>))

  <span class="no">profile_facets</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/directlabels/man/direct.label.html">direct.label</a></span>(<span class="no">gg</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"last.bumpup"</span>, <span class="kw">cex</span> <span class="kw">=</span> <span class="fl">0.4</span>))


  <span class="fu"><a href="https://rdrr.io/r/base/function.html">return</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(
    <span class="kw">fgen_facets</span> <span class="kw">=</span> <span class="no">fgen_facets</span>,
    <span class="kw">profile_facets</span> <span class="kw">=</span> <span class="no">profile_facets</span>
  ))
}</pre></body></html></div>
<p>Now we can finally plot the probing for mass~take-off velocity profile. The output of the function has two figures - one uses profile metrics for facets, and the other uses Force Generator characteristics for facets. The information in both graphs is the same, it is just organized differently to answer different questions.</p>
<div class="sourceCode" id="cb38"><html><body><pre class="r"><span class="fu">plot_probe</span>(<span class="no">probe_data</span>)
<span class="co">#&gt; $fgen_facets</span></pre></body></html></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-38-1.png" width="90%" style="display: block; margin: auto;"></p>
<pre><code>#&gt; 
#&gt; $profile_facets</code></pre>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-38-2.png" width="90%" style="display: block; margin: auto;"></p>
<p>As can be seen from the figures Force Generator max force seems to affect both <span class="math inline">\(F_0\)</span> and <span class="math inline">\(V_0\)</span>, while max velocity only affects the <span class="math inline">\(V_0\)</span> in the mass~take-off velocity profile.</p>
<p>The next profile we can probe is the mean force~mean velocity profile:</p>
<div class="sourceCode" id="cb40"><html><body><pre class="r"><span class="no">probe_data</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/probe_profile.html">probe_profile</a></span>(
  <span class="kw">mass</span> <span class="kw">=</span> <span class="fl">75</span>,
  <span class="kw">max_force</span> <span class="kw">=</span> <span class="fl">3000</span>,
  <span class="kw">max_velocity</span> <span class="kw">=</span> <span class="fl">4</span>,
  <span class="kw">time_to_max_activation</span> <span class="kw">=</span> <span class="fl">0.3</span>,
  <span class="kw">time_step</span> <span class="kw">=</span> <span class="fl">0.001</span>,
  <span class="kw">external_load</span> <span class="kw">=</span> <span class="no">external_load</span>,
  <span class="kw">change_ratio</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="fl">0.9</span>, <span class="fl">1.1</span>, <span class="kw">length.out</span> <span class="kw">=</span> <span class="fl">3</span>),

  <span class="co"># Profile variables</span>
  <span class="kw">profile_func</span> <span class="kw">=</span> <span class="kw">function</span>(<span class="no">...</span>) {
    <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">list</span> <span class="kw">=</span> <span class="fu"><a href="../reference/get_FV_profile.html">get_FV_profile</a></span>(
      <span class="no">...</span>,
      <span class="kw">force</span> <span class="kw">=</span> <span class="st">"mean_GRF_over_distance"</span>,
      <span class="kw">velocity</span> <span class="kw">=</span> <span class="st">"mean_velocity"</span>
    ))
  },
  <span class="kw">aggregate</span> <span class="kw">=</span> <span class="st">"ratio"</span>
)

<span class="fu">plot_probe</span>(<span class="no">probe_data</span>)
<span class="co">#&gt; $fgen_facets</span></pre></body></html></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-39-1.png" width="90%" style="display: block; margin: auto;"></p>
<pre><code>#&gt; 
#&gt; $profile_facets</code></pre>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-39-2.png" width="90%" style="display: block; margin: auto;"></p>
<p>As can be seen from the figures Force Generator max force seems to affect both <span class="math inline">\(F_0\)</span> and <span class="math inline">\(V_0\)</span> (negatively, actually), while max velocity only affects the <span class="math inline">\(V_0\)</span> in the mass~take-off velocity profile. Let’s plot these profile changes to inspect why this happens:</p>
<div class="sourceCode" id="cb42"><html><body><pre class="r"><span class="no">profile_data_original</span> <span class="kw">&lt;-</span> <span class="kw pkg">vjsim</span><span class="kw ns">::</span><span class="fu"><a href="../reference/vj_profile.html">vj_profile</a></span>(
  <span class="kw">external_load</span> <span class="kw">=</span> <span class="no">external_load</span>,

  <span class="co"># Simulation parameters</span>
  <span class="kw">mass</span> <span class="kw">=</span> <span class="fl">75</span>,
  <span class="kw">push_off_distance</span> <span class="kw">=</span> <span class="fl">0.4</span>,
  <span class="kw">max_force</span> <span class="kw">=</span> <span class="fl">3000</span>,
  <span class="kw">max_velocity</span> <span class="kw">=</span> <span class="fl">4</span>

  <span class="co"># Other parameters are default in the `vjsim::fgen_get_output`</span>
  <span class="co"># weight = mass * gravity_const,</span>
  <span class="co"># gravity_const = 9.81,</span>
  <span class="co"># decline_rate = 1.05,</span>
  <span class="co"># peak_location = -push_off_distance * 0.15,</span>
  <span class="co"># time_to_max_activation = 0.3</span>
)

<span class="no">profile_data_velocity</span> <span class="kw">&lt;-</span> <span class="kw pkg">vjsim</span><span class="kw ns">::</span><span class="fu"><a href="../reference/vj_profile.html">vj_profile</a></span>(
  <span class="kw">external_load</span> <span class="kw">=</span> <span class="no">external_load</span>,

  <span class="co"># Simulation parameters</span>
  <span class="kw">mass</span> <span class="kw">=</span> <span class="fl">75</span>,
  <span class="kw">push_off_distance</span> <span class="kw">=</span> <span class="fl">0.4</span>,
  <span class="kw">max_force</span> <span class="kw">=</span> <span class="fl">3000</span>,
  <span class="kw">max_velocity</span> <span class="kw">=</span> <span class="fl">4</span> * <span class="fl">1.1</span>,

  <span class="co"># Other parameters are default in the `vjsim::fgen_get_output`</span>
  <span class="co"># weight = mass * gravity_const,</span>
  <span class="co"># gravity_const = 9.81,</span>
  <span class="co"># decline_rate = 1.05,</span>
  <span class="co"># peak_location = -push_off_distance * 0.15,</span>
  <span class="co"># time_to_max_activation = 0.3</span>
)

<span class="no">profile_data_force</span> <span class="kw">&lt;-</span> <span class="kw pkg">vjsim</span><span class="kw ns">::</span><span class="fu"><a href="../reference/vj_profile.html">vj_profile</a></span>(
  <span class="kw">external_load</span> <span class="kw">=</span> <span class="no">external_load</span>,

  <span class="co"># Simulation parameters</span>
  <span class="kw">mass</span> <span class="kw">=</span> <span class="fl">75</span>,
  <span class="kw">push_off_distance</span> <span class="kw">=</span> <span class="fl">0.4</span>,
  <span class="kw">max_force</span> <span class="kw">=</span> <span class="fl">3000</span> * <span class="fl">1.1</span>,
  <span class="kw">max_velocity</span> <span class="kw">=</span> <span class="fl">4</span>

  <span class="co"># Other parameters are default in the `vjsim::fgen_get_output`</span>
  <span class="co"># weight = mass * gravity_const,</span>
  <span class="co"># gravity_const = 9.81,</span>
  <span class="co"># decline_rate = 1.05,</span>
  <span class="co"># peak_location = -push_off_distance * 0.15,</span>
  <span class="co"># time_to_max_activation = 0.3</span>
)

<span class="no">x_var</span> <span class="kw">&lt;-</span> <span class="st">"mean_GRF_over_distance"</span>
<span class="no">y_var</span> <span class="kw">&lt;-</span> <span class="st">"mean_velocity"</span>

<span class="no">profile_probe_data</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span>(
  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(
    <span class="kw">profile</span> <span class="kw">=</span> <span class="st">"original"</span>,
    <span class="kw">force</span> <span class="kw">=</span> <span class="no">profile_data_original</span><span class="kw">[[</span><span class="no">x_var</span>]],
    <span class="kw">velocity</span> <span class="kw">=</span> <span class="no">profile_data_original</span><span class="kw">[[</span><span class="no">y_var</span>]]
  ),

  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(
    <span class="kw">profile</span> <span class="kw">=</span> <span class="st">"velocity"</span>,
    <span class="kw">force</span> <span class="kw">=</span> <span class="no">profile_data_velocity</span><span class="kw">[[</span><span class="no">x_var</span>]],
    <span class="kw">velocity</span> <span class="kw">=</span> <span class="no">profile_data_velocity</span><span class="kw">[[</span><span class="no">y_var</span>]]
  ),

  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(
    <span class="kw">profile</span> <span class="kw">=</span> <span class="st">"force"</span>,
    <span class="kw">force</span> <span class="kw">=</span> <span class="no">profile_data_force</span><span class="kw">[[</span><span class="no">x_var</span>]],
    <span class="kw">velocity</span> <span class="kw">=</span> <span class="no">profile_data_force</span><span class="kw">[[</span><span class="no">y_var</span>]]
  )
)

<span class="no">gg</span> <span class="kw">&lt;-</span> <span class="fu">ggplot</span>(<span class="no">profile_probe_data</span>, <span class="fu">aes</span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">force</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="no">velocity</span>, <span class="kw">color</span> <span class="kw">=</span> <span class="no">profile</span>)) +
  <span class="fu"><a href="https://rdrr.io/pkg/cowplot/man/theme_cowplot.html">theme_cowplot</a></span>(<span class="fl">8</span>) +
  <span class="fu">geom_line</span>(<span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0.8</span>) +
  <span class="fu">geom_point</span>(<span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0.8</span>)
<span class="no">gg</span></pre></body></html></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-40-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>Red line represents <em>original</em> F-V profile; green line represents F-V profile with 10% improvement in Force Generator max velocity parameter, and blue line represents F-V profile with 10% improvement in Force Generator max force parameter. If we extend this profile using simple linear regression, we get the following:</p>
<div class="sourceCode" id="cb43"><html><body><pre class="r"><span class="no">gg</span> <span class="kw">&lt;-</span> <span class="fu">ggplot</span>(<span class="no">profile_probe_data</span>, <span class="fu">aes</span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">force</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="no">velocity</span>, <span class="kw">color</span> <span class="kw">=</span> <span class="no">profile</span>)) +
  <span class="fu"><a href="https://rdrr.io/pkg/cowplot/man/theme_cowplot.html">theme_cowplot</a></span>(<span class="fl">8</span>) +
  <span class="co"># geom_line(alpha = 0.8) +</span>
  <span class="fu">geom_point</span>(<span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0.8</span>) +
  <span class="fu">geom_smooth</span>(<span class="kw">method</span> <span class="kw">=</span> <span class="no">lm</span>, <span class="kw">se</span> <span class="kw">=</span> <span class="fl">FALSE</span>, <span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0.5</span>, <span class="kw">fullrange</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">size</span> <span class="kw">=</span> <span class="fl">0.5</span>, <span class="kw">linetype</span> <span class="kw">=</span> <span class="st">"dashed"</span>) +
  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.window.html">xlim</a></span>(-<span class="fl">10</span>, <span class="fl">3800</span>) +
  <span class="fu">geom_hline</span>(<span class="kw">yintercept</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="kw">color</span> <span class="kw">=</span> <span class="st">"grey"</span>, <span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0.5</span>) +
  <span class="fu">geom_vline</span>(<span class="kw">xintercept</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="kw">color</span> <span class="kw">=</span> <span class="st">"grey"</span>, <span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0.5</span>)
<span class="no">gg</span></pre></body></html></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-41-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>It does seem that increasing max force decreases <span class="math inline">\(V_0\)</span> as predicted by the <code><a href="../reference/probe_profile.html">vjsim::probe_profile</a></code> function. Even if we check the previous graph (without the extrapolation), increasing max force does increase mean velocity in the profiling range, but due to the change in slope, this results in lower <span class="math inline">\(V_0\)</span>. This represents an <em>artifact</em> that we need to be vary off when profiling and extrapolating beyond our data.</p>
<p>To finish with the probing, let’s plot mass~take-off velocity profile using this very same technique:</p>
<div class="sourceCode" id="cb44"><html><body><pre class="r"><span class="no">x_var</span> <span class="kw">&lt;-</span> <span class="st">"mass"</span>
<span class="no">y_var</span> <span class="kw">&lt;-</span> <span class="st">"take_off_velocity"</span>

<span class="no">profile_probe_data</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span>(
  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(
    <span class="kw">profile</span> <span class="kw">=</span> <span class="st">"original"</span>,
    <span class="kw">force</span> <span class="kw">=</span> <span class="no">profile_data_original</span><span class="kw">[[</span><span class="no">x_var</span>]],
    <span class="kw">velocity</span> <span class="kw">=</span> <span class="no">profile_data_original</span><span class="kw">[[</span><span class="no">y_var</span>]]
  ),

  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(
    <span class="kw">profile</span> <span class="kw">=</span> <span class="st">"velocity"</span>,
    <span class="kw">force</span> <span class="kw">=</span> <span class="no">profile_data_velocity</span><span class="kw">[[</span><span class="no">x_var</span>]],
    <span class="kw">velocity</span> <span class="kw">=</span> <span class="no">profile_data_velocity</span><span class="kw">[[</span><span class="no">y_var</span>]]
  ),

  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(
    <span class="kw">profile</span> <span class="kw">=</span> <span class="st">"force"</span>,
    <span class="kw">force</span> <span class="kw">=</span> <span class="no">profile_data_force</span><span class="kw">[[</span><span class="no">x_var</span>]],
    <span class="kw">velocity</span> <span class="kw">=</span> <span class="no">profile_data_force</span><span class="kw">[[</span><span class="no">y_var</span>]]
  )
)

<span class="no">gg</span> <span class="kw">&lt;-</span> <span class="fu">ggplot</span>(<span class="no">profile_probe_data</span>, <span class="fu">aes</span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">force</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="no">velocity</span>, <span class="kw">color</span> <span class="kw">=</span> <span class="no">profile</span>)) +
  <span class="fu"><a href="https://rdrr.io/pkg/cowplot/man/theme_cowplot.html">theme_cowplot</a></span>(<span class="fl">8</span>) +
  <span class="fu">geom_line</span>(<span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0.8</span>) +
  <span class="fu">geom_point</span>(<span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0.8</span>)
<span class="no">gg</span></pre></body></html></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-42-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>And not extrapolate further out to check for <span class="math inline">\(F_0\)</span> and <span class="math inline">\(V_0\)</span>:</p>
<div class="sourceCode" id="cb45"><html><body><pre class="r"><span class="no">gg</span> <span class="kw">&lt;-</span> <span class="fu">ggplot</span>(<span class="no">profile_probe_data</span>, <span class="fu">aes</span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">force</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="no">velocity</span>, <span class="kw">color</span> <span class="kw">=</span> <span class="no">profile</span>)) +
  <span class="fu"><a href="https://rdrr.io/pkg/cowplot/man/theme_cowplot.html">theme_cowplot</a></span>(<span class="fl">8</span>) +
  <span class="co"># geom_line(alpha = 0.8) +</span>
  <span class="fu">geom_point</span>(<span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0.8</span>) +
  <span class="fu">geom_smooth</span>(<span class="kw">method</span> <span class="kw">=</span> <span class="no">lm</span>, <span class="kw">se</span> <span class="kw">=</span> <span class="fl">FALSE</span>, <span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0.5</span>, <span class="kw">fullrange</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">size</span> <span class="kw">=</span> <span class="fl">0.5</span>, <span class="kw">linetype</span> <span class="kw">=</span> <span class="st">"dashed"</span>) +
  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.window.html">xlim</a></span>(-<span class="fl">10</span>, <span class="fl">300</span>) +
  <span class="fu">geom_hline</span>(<span class="kw">yintercept</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="kw">color</span> <span class="kw">=</span> <span class="st">"grey"</span>, <span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0.5</span>) +
  <span class="fu">geom_vline</span>(<span class="kw">xintercept</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="kw">color</span> <span class="kw">=</span> <span class="st">"grey"</span>, <span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0.5</span>)
<span class="no">gg</span></pre></body></html></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-43-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>There are few take-off point from this little exercise: manifested <span class="math inline">\(F_0\)</span> and <span class="math inline">\(V_0\)</span> does not recover Force Generator characteristics and increasing Force Generator characteristic (particularly max force and max velocity) yields improvements in the jump performance across external load; BUT due to the change in slope, extrapolation to <span class="math inline">\(F_0\)</span> and <span class="math inline">\(V_0\)</span> (i.e., beyond used external load and our data) can tell us opposite story. Be vary of this.</p>
</div>
<div id="bootstrapping-fv-profiles" class="section level1">
<h1 class="hasAnchor">
<a href="#bootstrapping-fv-profiles" class="anchor"></a>Bootstrapping FV profiles</h1>
<p>As have been demonstrated thorough this vignette, estimated <span class="math inline">\(F_0\)</span> and <span class="math inline">\(V_0\)</span> depend on the data points and their number, as well as the model selected (i.e. simple linear regression or polynomial regression). The data points will not be exactly on the regression line. This will introduce uncertainty in the <span class="math inline">\(F_0\)</span> and <span class="math inline">\(V_0\)</span> estimation. With the simple linear regression, uncertainty in the line coefficients (i.e. slope and intercept) is expressed with the <em>standard errors</em> and <em>confidence intervals</em> (assuming there is some <em>true</em> individual profile). Since <span class="math inline">\(F_0\)</span> and <span class="math inline">\(V_0\)</span> represents nothing more than another way to represents a line, we can also estimate uncertainty around them.</p>
<p>To do this, I will use <em>bootstrap</em> and my <code>bmbstats</code> package<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a><span class="citation">(Jovanović <a href="#ref-R-bmbstats" role="doc-biblioref">2020</a><a href="#ref-R-bmbstats" role="doc-biblioref">a</a>, <a href="#ref-jovanovicBmbstatsMagnitudebasedStatistics2020" role="doc-biblioref">2020</a><a href="#ref-jovanovicBmbstatsMagnitudebasedStatistics2020" role="doc-biblioref">b</a>, <a href="#ref-jovanovicStatisticalModellingSports2019" role="doc-biblioref">2019</a>)</span>. Bootstrap method is very simple: it just resamples the sample with the equal number of observations (which implies repeated resamples to happen). For each bootstrap resample the estimators (in this case <span class="math inline">\(F_0\)</span> and <span class="math inline">\(V_0\)</span> are estimated).</p>
<p><code>bmbstats</code> needs to be installed from the GitHub repository:</p>
<div class="sourceCode" id="cb46"><html><body><pre class="r"><span class="co"># Install bmbstats if you haven't already by running the following commands</span>
<span class="co"># install.packages("devtools")</span>
<span class="co"># devtools::install_github("mladenjovanovic/bmbstats")</span>

<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">bmbstats</span>)</pre></body></html></div>
<p>The following code (actually a wrapper code), puts profiling estimates inside the bootstrap loop (1000 resamples) and provides 90% confidence intervals (CIs) estimated using percentile method. Additionally, this code generates a profile plot (assuming simple linear regression)</p>
<div class="sourceCode" id="cb47"><html><body><pre class="r"><span class="no">boot_profile</span> <span class="kw">&lt;-</span> <span class="kw">function</span>(<span class="no">profile_data</span>, <span class="no">force</span> <span class="kw">=</span> <span class="st">"mass"</span>, <span class="no">velocity</span> <span class="kw">=</span> <span class="st">"take_off_velocity"</span>, <span class="no">poly_deg</span> <span class="kw">=</span> <span class="fl">1</span>) {
  <span class="no">profile_estimators</span> <span class="kw">&lt;-</span> <span class="kw">function</span>(<span class="no">data</span>, <span class="no">SESOI_lower</span>, <span class="no">SESOI_upper</span>, <span class="no">na.rm</span>, <span class="no">init_boot</span>) {
    <span class="co"># Get profile</span>
    <span class="no">profile</span> <span class="kw">&lt;-</span> <span class="kw pkg">vjsim</span><span class="kw ns">::</span><span class="fu"><a href="../reference/get_FV_profile.html">get_FV_profile</a></span>(
      <span class="kw">profile_data</span> <span class="kw">=</span> <span class="no">data</span>,
      <span class="kw">force</span> <span class="kw">=</span> <span class="no">force</span>,
      <span class="kw">velocity</span> <span class="kw">=</span> <span class="no">velocity</span>,
      <span class="kw">poly_deg</span> <span class="kw">=</span> <span class="no">poly_deg</span>
    )

    <span class="co"># Return profile</span>
    <span class="fu"><a href="https://rdrr.io/r/base/function.html">return</a></span>(<span class="no">profile</span>)
  }

  <span class="co"># Perform bootstrap</span>
  <span class="no">boot_data</span> <span class="kw">&lt;-</span> <span class="kw pkg">bmbstats</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/bmbstats/man/bmbstats.html">bmbstats</a></span>(
    <span class="kw">data</span> <span class="kw">=</span> <span class="no">profile_data</span>,
    <span class="kw">estimator_function</span> <span class="kw">=</span> <span class="no">profile_estimators</span>,
    <span class="kw">control</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/pkg/bmbstats/man/model_control.html">model_control</a></span>(
      <span class="kw">boot_samples</span> <span class="kw">=</span> <span class="fl">1000</span>,
      <span class="kw">boot_type</span> <span class="kw">=</span> <span class="st">"perc"</span>,
      <span class="kw">seed</span> <span class="kw">=</span> <span class="fl">1667</span>
    )
  )

  <span class="co"># Add plot</span>
  <span class="no">plot_data</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="kw">F0</span> <span class="kw">=</span> <span class="no">boot_data</span>$<span class="no">boot</span>$<span class="no">t</span>[, <span class="fl">1</span>], <span class="kw">V0</span> <span class="kw">=</span> <span class="no">boot_data</span>$<span class="no">boot</span>$<span class="no">t</span>[, <span class="fl">2</span>])

  <span class="no">n_points</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span>(<span class="no">plot_data</span>)

  <span class="no">plot_data</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(
    <span class="kw">x</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="no">plot_data</span>$<span class="no">F0</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fl">0</span>, <span class="no">n_points</span>)),
    <span class="kw">y</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fl">0</span>, <span class="no">n_points</span>), <span class="no">plot_data</span>$<span class="no">V0</span>),
    <span class="kw">group</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="fl">1</span>, <span class="no">n_points</span>), <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="fl">1</span>, <span class="no">n_points</span>))
  )

  <span class="no">gg</span> <span class="kw">&lt;-</span> <span class="fu">ggplot</span>(<span class="no">plot_data</span>, <span class="fu">aes</span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">x</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="no">y</span>, <span class="kw">group</span> <span class="kw">=</span> <span class="no">group</span>)) +
    <span class="fu"><a href="https://rdrr.io/pkg/cowplot/man/theme_cowplot.html">theme_cowplot</a></span>(<span class="fl">8</span>) +
    <span class="fu">geom_line</span>(<span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0.01</span>, <span class="kw">color</span> <span class="kw">=</span> <span class="st">"blue"</span>) +
    <span class="fu">labs</span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">force</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="no">velocity</span>)

  <span class="no">boot_data</span>$<span class="no">graphs</span> <span class="kw">&lt;-</span> <span class="no">gg</span>

  <span class="fu"><a href="https://rdrr.io/r/base/function.html">return</a></span>(<span class="no">boot_data</span>)
}</pre></body></html></div>
<p>Let’s use out profile data to perform the bootstrap and estimate uncertainty around <span class="math inline">\(F_0\)</span> and <span class="math inline">\(V_0\)</span>. Let’s use mass and TOV profile first:</p>
<div class="sourceCode" id="cb48"><html><body><pre class="r"><span class="no">boot_data</span> <span class="kw">&lt;-</span> <span class="fu">boot_profile</span>(<span class="no">profile_data</span>, <span class="kw">force</span> <span class="kw">=</span> <span class="st">"mass"</span>, <span class="kw">velocity</span> <span class="kw">=</span> <span class="st">"take_off_velocity"</span>)</pre></body></html></div>
<p>The 90% CIs of the profile estimators (i.e. <span class="math inline">\(F_0\)</span> and <span class="math inline">\(V_0\)</span>) can be found inside the object:</p>
<div class="sourceCode" id="cb49"><html><body><pre class="r"><span class="no">boot_data</span>$<span class="no">estimators</span>
<span class="co">#&gt;   estimator      value      lower       upper</span>
<span class="co">#&gt; 1        F0 265.147072 254.660376 273.7377738</span>
<span class="co">#&gt; 2    F0_rel   3.535294   3.395472   3.6498370</span>
<span class="co">#&gt; 3        V0   3.471573   3.333834   3.5602424</span>
<span class="co">#&gt; 4      Pmax 230.119342 226.248546 232.3633889</span>
<span class="co">#&gt; 5  Pmax_rel   3.068258   3.016647   3.0981785</span>
<span class="co">#&gt; 6       Sfv -76.376642 -82.026003 -71.6673545</span>
<span class="co">#&gt; 7   Sfv_rel  -1.018355  -1.093680  -0.9555647</span></pre></body></html></div>
<p>This uncertainty around <span class="math inline">\(F_0\)</span> and <span class="math inline">\(V_0\)</span> can easily be plotted:</p>
<div class="sourceCode" id="cb50"><html><body><pre class="r"><span class="no">boot_data</span>$<span class="no">graphs</span></pre></body></html></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-48-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>Each line on the above plot represents bootstrap resample.</p>
<p>Now let’s repeat this for the mean GRF (over distance) and mean velocity profile:</p>
<div class="sourceCode" id="cb51"><html><body><pre class="r"><span class="no">boot_data</span> <span class="kw">&lt;-</span> <span class="fu">boot_profile</span>(<span class="no">profile_data</span>, <span class="kw">force</span> <span class="kw">=</span> <span class="st">"mean_GRF_over_distance"</span>, <span class="kw">velocity</span> <span class="kw">=</span> <span class="st">"take_off_velocity"</span>)

<span class="no">boot_data</span>$<span class="no">estimators</span>
<span class="co">#&gt;   estimator       value       lower       upper</span>
<span class="co">#&gt; 1        F0 2690.724580 2633.393177 2756.314965</span>
<span class="co">#&gt; 2    F0_rel   35.876328   35.111909   36.750866</span>
<span class="co">#&gt; 3        V0    5.057249    4.903268    5.333117</span>
<span class="co">#&gt; 4      Pmax 3401.915988 3372.757719 3507.462985</span>
<span class="co">#&gt; 5  Pmax_rel   45.358880   44.970103   46.766173</span>
<span class="co">#&gt; 6       Sfv -532.053025 -561.592479 -493.525540</span>
<span class="co">#&gt; 7   Sfv_rel   -7.094040   -7.487900   -6.580341</span>

<span class="no">boot_data</span>$<span class="no">graphs</span></pre></body></html></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-49-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>Even with the simulated model, that doesn’t have <em>measurement error</em> involved, the uncertainty around profile parameters emerge (due representing jump performance profile with regression model and extrapolating). This topic will be further discussed in the <code>exploring-vjsim</code> vignette. For now it is important to realize the uncertainty around FV profile estimate (even without measurement error issues).</p>
</div>
<div id="additional-interesting-topics" class="section level1">
<h1 class="hasAnchor">
<a href="#additional-interesting-topics" class="anchor"></a>Additional interesting topics</h1>
<p>One of the initial reasons why I created <code>vjsim</code> and got into simulating vertical jump in the first place, is to test whether F-V relationship would emerge with a simple Force Generator <span class="citation">(Jovanović <a href="#ref-jovanovicUnderstandingForceVelocityCurve2018" role="doc-biblioref">2018</a>)</span>. Now with <code>vjsim</code> that can be easily tested. Let’s play with few ideas.</p>
<div id="force-generator-without-force-length-and-force-time-characteristics" class="section level2">
<h2 class="hasAnchor">
<a href="#force-generator-without-force-length-and-force-time-characteristics" class="anchor"></a>Force Generator without Force-Length and Force-Time characteristics</h2>
<p>Let’s assume Force Generator characteristics without Force-Length and Force-Time characteristics. This implies instant max force and viscous force only (i.e. Force-Velocity characteristic; see previous vignettes for more information about these components). We are interested in checking if F-V relationship will be manifested and if <span class="math inline">\(F_0\)</span> and <span class="math inline">\(V_0\)</span> will uncover <em>true</em> Force Generator characteristics.</p>
<div class="sourceCode" id="cb52"><html><body><pre class="r"><span class="co"># Profile data for Force Generator with only viscous components</span>
<span class="no">profile_data</span> <span class="kw">&lt;-</span> <span class="kw pkg">vjsim</span><span class="kw ns">::</span><span class="fu"><a href="../reference/vj_profile.html">vj_profile</a></span>(
  <span class="kw">external_load</span> <span class="kw">=</span> <span class="no">external_load</span>,

  <span class="co"># Simulation parameters</span>
  <span class="kw">mass</span> <span class="kw">=</span> <span class="fl">75</span>,
  <span class="kw">push_off_distance</span> <span class="kw">=</span> <span class="fl">0.4</span>,
  <span class="kw">max_force</span> <span class="kw">=</span> <span class="fl">3000</span>,
  <span class="kw">max_velocity</span> <span class="kw">=</span> <span class="fl">4</span>,

  <span class="co"># Other parameters are default in the `vjsim::fgen_get_output`</span>
  <span class="co"># weight = mass * gravity_const,</span>
  <span class="co"># gravity_const = 9.81,</span>

  <span class="co"># Setting these to 0 removes these components from the Force Generator</span>
  <span class="kw">decline_rate</span> <span class="kw">=</span> <span class="fl">0</span>,
  <span class="kw">peak_location</span> <span class="kw">=</span> <span class="fl">0</span>,
  <span class="kw">time_to_max_activation</span> <span class="kw">=</span> <span class="fl">0</span>
)</pre></body></html></div>
<p>Here are the profiles:</p>
<div class="sourceCode" id="cb53"><html><body><pre class="r"><span class="fu">plot_profile</span>(<span class="no">profile_data</span>, <span class="st">"mass"</span>, <span class="st">"height"</span>)</pre></body></html></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-51-1.png" width="90%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb54"><html><body><pre class="r">
<span class="kw pkg">vjsim</span><span class="kw ns">::</span><span class="fu"><a href="../reference/get_FV_profile.html">get_FV_profile</a></span>(
  <span class="kw">profile_data</span> <span class="kw">=</span> <span class="no">profile_data</span>,
  <span class="kw">force</span> <span class="kw">=</span> <span class="st">"mass"</span>,
  <span class="kw">velocity</span> <span class="kw">=</span> <span class="st">"height"</span>
)
<span class="co">#&gt; $F0</span>
<span class="co">#&gt; [1] 209.2621</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $F0_rel</span>
<span class="co">#&gt; [1] 2.790162</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $V0</span>
<span class="co">#&gt; [1] 0.5430743</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Pmax</span>
<span class="co">#&gt; [1] 28.41122</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Pmax_rel</span>
<span class="co">#&gt; [1] 0.3788163</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Sfv</span>
<span class="co">#&gt; [1] -385.3287</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Sfv_rel</span>
<span class="co">#&gt; [1] -5.137716</span></pre></body></html></div>
<div class="sourceCode" id="cb55"><html><body><pre class="r"><span class="fu">plot_profile</span>(<span class="no">profile_data</span>, <span class="st">"mass"</span>, <span class="st">"take_off_velocity"</span>)</pre></body></html></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-52-1.png" width="90%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb56"><html><body><pre class="r">
<span class="kw pkg">vjsim</span><span class="kw ns">::</span><span class="fu"><a href="../reference/get_FV_profile.html">get_FV_profile</a></span>(
  <span class="kw">profile_data</span> <span class="kw">=</span> <span class="no">profile_data</span>,
  <span class="kw">force</span> <span class="kw">=</span> <span class="st">"mass"</span>,
  <span class="kw">velocity</span> <span class="kw">=</span> <span class="st">"take_off_velocity"</span>
)
<span class="co">#&gt; $F0</span>
<span class="co">#&gt; [1] 288.3213</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $F0_rel</span>
<span class="co">#&gt; [1] 3.844285</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $V0</span>
<span class="co">#&gt; [1] 3.578896</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Pmax</span>
<span class="co">#&gt; [1] 257.968</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Pmax_rel</span>
<span class="co">#&gt; [1] 3.439574</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Sfv</span>
<span class="co">#&gt; [1] -80.56154</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Sfv_rel</span>
<span class="co">#&gt; [1] -1.074154</span></pre></body></html></div>
<div class="sourceCode" id="cb57"><html><body><pre class="r"><span class="fu">plot_profile</span>(<span class="no">profile_data</span>, <span class="st">"mean_GRF_over_distance"</span>, <span class="st">"mean_velocity"</span>)</pre></body></html></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-53-1.png" width="90%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb58"><html><body><pre class="r">
<span class="kw pkg">vjsim</span><span class="kw ns">::</span><span class="fu"><a href="../reference/get_FV_profile.html">get_FV_profile</a></span>(
  <span class="kw">profile_data</span> <span class="kw">=</span> <span class="no">profile_data</span>,
  <span class="kw">force</span> <span class="kw">=</span> <span class="st">"mean_GRF_over_distance"</span>,
  <span class="kw">velocity</span> <span class="kw">=</span> <span class="st">"mean_velocity"</span>
)
<span class="co">#&gt; $F0</span>
<span class="co">#&gt; [1] 2969.725</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $F0_rel</span>
<span class="co">#&gt; [1] 39.59633</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $V0</span>
<span class="co">#&gt; [1] 3.434683</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Pmax</span>
<span class="co">#&gt; [1] 2550.016</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Pmax_rel</span>
<span class="co">#&gt; [1] 34.00021</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Sfv</span>
<span class="co">#&gt; [1] -864.6284</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Sfv_rel</span>
<span class="co">#&gt; [1] -11.52838</span></pre></body></html></div>
<div class="sourceCode" id="cb59"><html><body><pre class="r"><span class="fu">plot_profile</span>(<span class="no">profile_data</span>, <span class="st">"peak_GRF"</span>, <span class="st">"peak_velocity"</span>)</pre></body></html></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-54-1.png" width="90%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb60"><html><body><pre class="r">
<span class="kw pkg">vjsim</span><span class="kw ns">::</span><span class="fu"><a href="../reference/get_FV_profile.html">get_FV_profile</a></span>(
  <span class="kw">profile_data</span> <span class="kw">=</span> <span class="no">profile_data</span>,
  <span class="kw">force</span> <span class="kw">=</span> <span class="st">"peak_GRF"</span>,
  <span class="kw">velocity</span> <span class="kw">=</span> <span class="st">"peak_velocity"</span>
)
<span class="co">#&gt; $F0</span>
<span class="co">#&gt; [1] NA</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $F0_rel</span>
<span class="co">#&gt; [1] NA</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $V0</span>
<span class="co">#&gt; [1] NA</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Pmax</span>
<span class="co">#&gt; [1] NA</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Pmax_rel</span>
<span class="co">#&gt; [1] NA</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Sfv</span>
<span class="co">#&gt; [1] NA</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Sfv_rel</span>
<span class="co">#&gt; [1] NA</span></pre></body></html></div>
<p>As can be seen from the mean force~mean velocity, manifested and extrapolated <span class="math inline">\(V_0\)</span> and <span class="math inline">\(F_0\)</span> do not recover Force Generator characteristics. This is due to constraints of the system (e.g. push-off distance, inertial).</p>
</div>
<div id="force-generator-as-pure-force" class="section level2">
<h2 class="hasAnchor">
<a href="#force-generator-as-pure-force" class="anchor"></a>Force Generator as <em>pure</em> force</h2>
<p>In this experiment we are going to assume that Force Generator generates constant force of 3,000N. Let’s see how that affects manifested profiles.</p>
<div class="sourceCode" id="cb61"><html><body><pre class="r"><span class="co"># Profile data for Force Generator with only viscous components</span>
<span class="no">profile_data</span> <span class="kw">&lt;-</span> <span class="kw pkg">vjsim</span><span class="kw ns">::</span><span class="fu"><a href="../reference/vj_profile.html">vj_profile</a></span>(
  <span class="kw">external_load</span> <span class="kw">=</span> <span class="no">external_load</span>,

  <span class="co"># Simulation parameters</span>
  <span class="kw">mass</span> <span class="kw">=</span> <span class="fl">75</span>,
  <span class="kw">push_off_distance</span> <span class="kw">=</span> <span class="fl">0.4</span>,
  <span class="kw">max_force</span> <span class="kw">=</span> <span class="fl">3000</span>,

  <span class="kw">max_velocity</span> <span class="kw">=</span> <span class="fl">Inf</span>, <span class="co"># Needs to be infinite</span>

  <span class="co"># Other parameters are default in the `vjsim::fgen_get_output`</span>
  <span class="co"># weight = mass * gravity_const,</span>
  <span class="co"># gravity_const = 9.81,</span>

  <span class="co"># Setting these to 0 removes these components from the Force Generator</span>
  <span class="kw">decline_rate</span> <span class="kw">=</span> <span class="fl">0</span>,
  <span class="kw">peak_location</span> <span class="kw">=</span> <span class="fl">0</span>,
  <span class="kw">time_to_max_activation</span> <span class="kw">=</span> <span class="fl">0</span>
)</pre></body></html></div>
<p>Here are the profiles:</p>
<div class="sourceCode" id="cb62"><html><body><pre class="r"><span class="fu">plot_profile</span>(<span class="no">profile_data</span>, <span class="st">"mass"</span>, <span class="st">"height"</span>)</pre></body></html></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-56-1.png" width="90%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb63"><html><body><pre class="r">
<span class="kw pkg">vjsim</span><span class="kw ns">::</span><span class="fu"><a href="../reference/get_FV_profile.html">get_FV_profile</a></span>(
  <span class="kw">profile_data</span> <span class="kw">=</span> <span class="no">profile_data</span>,
  <span class="kw">force</span> <span class="kw">=</span> <span class="st">"mass"</span>,
  <span class="kw">velocity</span> <span class="kw">=</span> <span class="st">"height"</span>
)
<span class="co">#&gt; $F0</span>
<span class="co">#&gt; [1] 198.8235</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $F0_rel</span>
<span class="co">#&gt; [1] 2.65098</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $V0</span>
<span class="co">#&gt; [1] 1.772463</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Pmax</span>
<span class="co">#&gt; [1] 88.10179</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Pmax_rel</span>
<span class="co">#&gt; [1] 1.174691</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Sfv</span>
<span class="co">#&gt; [1] -112.1736</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Sfv_rel</span>
<span class="co">#&gt; [1] -1.495648</span></pre></body></html></div>
<div class="sourceCode" id="cb64"><html><body><pre class="r"><span class="fu">plot_profile</span>(<span class="no">profile_data</span>, <span class="st">"mass"</span>, <span class="st">"take_off_velocity"</span>)</pre></body></html></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-57-1.png" width="90%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb65"><html><body><pre class="r">
<span class="kw pkg">vjsim</span><span class="kw ns">::</span><span class="fu"><a href="../reference/get_FV_profile.html">get_FV_profile</a></span>(
  <span class="kw">profile_data</span> <span class="kw">=</span> <span class="no">profile_data</span>,
  <span class="kw">force</span> <span class="kw">=</span> <span class="st">"mass"</span>,
  <span class="kw">velocity</span> <span class="kw">=</span> <span class="st">"take_off_velocity"</span>
)
<span class="co">#&gt; $F0</span>
<span class="co">#&gt; [1] 268.7905</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $F0_rel</span>
<span class="co">#&gt; [1] 3.583873</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $V0</span>
<span class="co">#&gt; [1] 6.531545</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Pmax</span>
<span class="co">#&gt; [1] 438.9043</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Pmax_rel</span>
<span class="co">#&gt; [1] 5.852058</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Sfv</span>
<span class="co">#&gt; [1] -41.15267</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Sfv_rel</span>
<span class="co">#&gt; [1] -0.5487022</span></pre></body></html></div>
<div class="sourceCode" id="cb66"><html><body><pre class="r"><span class="fu">plot_profile</span>(<span class="no">profile_data</span>, <span class="st">"mean_GRF_over_distance"</span>, <span class="st">"mean_velocity"</span>)</pre></body></html></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-58-1.png" width="90%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb67"><html><body><pre class="r">
<span class="kw pkg">vjsim</span><span class="kw ns">::</span><span class="fu"><a href="../reference/get_FV_profile.html">get_FV_profile</a></span>(
  <span class="kw">profile_data</span> <span class="kw">=</span> <span class="no">profile_data</span>,
  <span class="kw">force</span> <span class="kw">=</span> <span class="st">"mean_GRF_over_distance"</span>,
  <span class="kw">velocity</span> <span class="kw">=</span> <span class="st">"mean_velocity"</span>
)
<span class="co">#&gt; $F0</span>
<span class="co">#&gt; [1] 3000</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $F0_rel</span>
<span class="co">#&gt; [1] 40</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $V0</span>
<span class="co">#&gt; [1] -9.713879e+13</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Pmax</span>
<span class="co">#&gt; [1] -7.285409e+16</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Pmax_rel</span>
<span class="co">#&gt; [1] -9.713879e+14</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Sfv</span>
<span class="co">#&gt; [1] 3.088365e-11</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Sfv_rel</span>
<span class="co">#&gt; [1] 4.117819e-13</span></pre></body></html></div>
<div class="sourceCode" id="cb68"><html><body><pre class="r"><span class="fu">plot_profile</span>(<span class="no">profile_data</span>, <span class="st">"peak_GRF"</span>, <span class="st">"peak_velocity"</span>)</pre></body></html></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-59-1.png" width="90%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb69"><html><body><pre class="r">
<span class="kw pkg">vjsim</span><span class="kw ns">::</span><span class="fu"><a href="../reference/get_FV_profile.html">get_FV_profile</a></span>(
  <span class="kw">profile_data</span> <span class="kw">=</span> <span class="no">profile_data</span>,
  <span class="kw">force</span> <span class="kw">=</span> <span class="st">"peak_GRF"</span>,
  <span class="kw">velocity</span> <span class="kw">=</span> <span class="st">"peak_velocity"</span>
)
<span class="co">#&gt; $F0</span>
<span class="co">#&gt; [1] NA</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $F0_rel</span>
<span class="co">#&gt; [1] NA</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $V0</span>
<span class="co">#&gt; [1] NA</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Pmax</span>
<span class="co">#&gt; [1] NA</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Pmax_rel</span>
<span class="co">#&gt; [1] NA</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Sfv</span>
<span class="co">#&gt; [1] NA</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Sfv_rel</span>
<span class="co">#&gt; [1] NA</span></pre></body></html></div>
<p>As can be seen from the figures above, simple Force Generator with constant force results in mass~height and mass~take-off velocity profile, but not F-V profiles for mean force and peak force.</p>
</div>
<div id="force-generator-without-viscous-components" class="section level2">
<h2 class="hasAnchor">
<a href="#force-generator-without-viscous-components" class="anchor"></a>Force Generator without viscous components</h2>
<p>For a final experiment let’s check how profiles emerge for the Force Generator without Force-Velocity characteristic, but with Force-Time and Force-Length relationships.</p>
<div class="sourceCode" id="cb70"><html><body><pre class="r"><span class="co"># Profile data for Force Generator with only viscous components</span>
<span class="no">profile_data</span> <span class="kw">&lt;-</span> <span class="kw pkg">vjsim</span><span class="kw ns">::</span><span class="fu"><a href="../reference/vj_profile.html">vj_profile</a></span>(
  <span class="kw">external_load</span> <span class="kw">=</span> <span class="no">external_load</span>,

  <span class="co"># Simulation parameters</span>
  <span class="kw">mass</span> <span class="kw">=</span> <span class="fl">75</span>,
  <span class="kw">push_off_distance</span> <span class="kw">=</span> <span class="fl">0.4</span>,
  <span class="kw">max_force</span> <span class="kw">=</span> <span class="fl">3000</span>,

  <span class="kw">max_velocity</span> <span class="kw">=</span> <span class="fl">Inf</span>, <span class="co"># Needs to be infinite</span>

  <span class="co"># Other parameters are default in the `vjsim::fgen_get_output`</span>
  <span class="co"># weight = mass * gravity_const,</span>
  <span class="co"># gravity_const = 9.81,</span>
  <span class="co"># decline_rate = 1.05,</span>
  <span class="co"># peak_location = -push_off_distance * 0.15,</span>
  <span class="co"># time_to_max_activation = 0.3</span>
)</pre></body></html></div>
<p>Here are the profiles:</p>
<div class="sourceCode" id="cb71"><html><body><pre class="r"><span class="fu">plot_profile</span>(<span class="no">profile_data</span>, <span class="st">"mass"</span>, <span class="st">"height"</span>)</pre></body></html></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-61-1.png" width="90%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb72"><html><body><pre class="r">
<span class="kw pkg">vjsim</span><span class="kw ns">::</span><span class="fu"><a href="../reference/get_FV_profile.html">get_FV_profile</a></span>(
  <span class="kw">profile_data</span> <span class="kw">=</span> <span class="no">profile_data</span>,
  <span class="kw">force</span> <span class="kw">=</span> <span class="st">"mass"</span>,
  <span class="kw">velocity</span> <span class="kw">=</span> <span class="st">"height"</span>
)
<span class="co">#&gt; $F0</span>
<span class="co">#&gt; [1] 195.5643</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $F0_rel</span>
<span class="co">#&gt; [1] 2.607524</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $V0</span>
<span class="co">#&gt; [1] 1.519851</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Pmax</span>
<span class="co">#&gt; [1] 74.30715</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Pmax_rel</span>
<span class="co">#&gt; [1] 0.9907621</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Sfv</span>
<span class="co">#&gt; [1] -128.6734</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Sfv_rel</span>
<span class="co">#&gt; [1] -1.715645</span></pre></body></html></div>
<div class="sourceCode" id="cb73"><html><body><pre class="r"><span class="fu">plot_profile</span>(<span class="no">profile_data</span>, <span class="st">"mass"</span>, <span class="st">"take_off_velocity"</span>)</pre></body></html></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-62-1.png" width="90%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb74"><html><body><pre class="r">
<span class="kw pkg">vjsim</span><span class="kw ns">::</span><span class="fu"><a href="../reference/get_FV_profile.html">get_FV_profile</a></span>(
  <span class="kw">profile_data</span> <span class="kw">=</span> <span class="no">profile_data</span>,
  <span class="kw">force</span> <span class="kw">=</span> <span class="st">"mass"</span>,
  <span class="kw">velocity</span> <span class="kw">=</span> <span class="st">"take_off_velocity"</span>
)
<span class="co">#&gt; $F0</span>
<span class="co">#&gt; [1] 261.1984</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $F0_rel</span>
<span class="co">#&gt; [1] 3.482645</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $V0</span>
<span class="co">#&gt; [1] 6.098933</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Pmax</span>
<span class="co">#&gt; [1] 398.2579</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Pmax_rel</span>
<span class="co">#&gt; [1] 5.310105</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Sfv</span>
<span class="co">#&gt; [1] -42.8269</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Sfv_rel</span>
<span class="co">#&gt; [1] -0.5710253</span></pre></body></html></div>
<div class="sourceCode" id="cb75"><html><body><pre class="r"><span class="fu">plot_profile</span>(<span class="no">profile_data</span>, <span class="st">"mean_GRF_over_distance"</span>, <span class="st">"mean_velocity"</span>)</pre></body></html></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-63-1.png" width="90%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb76"><html><body><pre class="r">
<span class="kw pkg">vjsim</span><span class="kw ns">::</span><span class="fu"><a href="../reference/get_FV_profile.html">get_FV_profile</a></span>(
  <span class="kw">profile_data</span> <span class="kw">=</span> <span class="no">profile_data</span>,
  <span class="kw">force</span> <span class="kw">=</span> <span class="st">"mean_GRF_over_distance"</span>,
  <span class="kw">velocity</span> <span class="kw">=</span> <span class="st">"mean_velocity"</span>
)
<span class="co">#&gt; $F0</span>
<span class="co">#&gt; [1] 2871.831</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $F0_rel</span>
<span class="co">#&gt; [1] 38.29108</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $V0</span>
<span class="co">#&gt; [1] 18.93117</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Pmax</span>
<span class="co">#&gt; [1] 13591.78</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Pmax_rel</span>
<span class="co">#&gt; [1] 181.2238</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Sfv</span>
<span class="co">#&gt; [1] -151.6985</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Sfv_rel</span>
<span class="co">#&gt; [1] -2.022647</span></pre></body></html></div>
<div class="sourceCode" id="cb77"><html><body><pre class="r"><span class="fu">plot_profile</span>(<span class="no">profile_data</span>, <span class="st">"peak_GRF"</span>, <span class="st">"peak_velocity"</span>)</pre></body></html></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-64-1.png" width="90%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb78"><html><body><pre class="r">
<span class="kw pkg">vjsim</span><span class="kw ns">::</span><span class="fu"><a href="../reference/get_FV_profile.html">get_FV_profile</a></span>(
  <span class="kw">profile_data</span> <span class="kw">=</span> <span class="no">profile_data</span>,
  <span class="kw">force</span> <span class="kw">=</span> <span class="st">"peak_GRF"</span>,
  <span class="kw">velocity</span> <span class="kw">=</span> <span class="st">"peak_velocity"</span>
)
<span class="co">#&gt; $F0</span>
<span class="co">#&gt; [1] 3002.26</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $F0_rel</span>
<span class="co">#&gt; [1] 40.03013</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $V0</span>
<span class="co">#&gt; [1] 3834.282</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Pmax</span>
<span class="co">#&gt; [1] 2877878</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Pmax_rel</span>
<span class="co">#&gt; [1] 38371.7</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Sfv</span>
<span class="co">#&gt; [1] -0.7830043</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Sfv_rel</span>
<span class="co">#&gt; [1] -0.01044006</span></pre></body></html></div>
<p>From these simulation experiments, it seems that mass~height and mass~TOV are manifested regardless of the Force Generator characteristics (as long as there is force). This implies that we only need a simple Force Generator for the F-V (here F-V means load~velocity) profile to emerge.</p>
</div>
</div>
<div id="shiny-app" class="section level1">
<h1 class="hasAnchor">
<a href="#shiny-app" class="anchor"></a>Shiny App</h1>
<p>Now start playing with the code or with the <a href="https://athletess.shinyapps.io/shiny-simulator/">Shiny App</a> by click on the previous link or by running the following code:</p>
<div class="sourceCode" id="cb79"><html><body><pre class="r"><span class="kw pkg">vjsim</span><span class="kw ns">::</span><span class="fu"><a href="../reference/run_simulator.html">run_simulator</a></span>()</pre></body></html></div>
<p>The <a href="https://athletess.shinyapps.io/shiny-simulator/">Shiny App</a> will allow you much more interactive environment for exploring the <code>vjsim</code>.</p>
</div>
<div id="want-to-learn-more" class="section level1">
<h1 class="hasAnchor">
<a href="#want-to-learn-more" class="anchor"></a>Want to learn more?</h1>
<p>Please continue by reading “Optimization in <code>vjsim</code>” (<a href="https://mladenjovanovic.github.io/vjsim/articles/optimization-vjsim.html">LINK</a>) vignette:</p>
<div class="sourceCode" id="cb80"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/vignette.html">vignette</a></span>(<span class="st">"optimization-vjsim"</span>)</pre></body></html></div>
</div>
<div id="references" class="section level1 unnumbered">
<h1 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h1>
<div id="refs" class="references hanging-indent">
<div id="ref-borsboomMeasuringMindConceptual2009">
<p>Borsboom, Denny. 2009. <em>Measuring the Mind: Conceptual Issues in Modern Psychometrics</em>. Cambridge: Cambridge University Press.</p>
</div>
<div id="ref-jaricLegMusclesDesign2009">
<p>Jaric, Slobodan, and Goran Markovic. 2009. “Leg Muscles Design: The Maximum Dynamic Output Hypothesis.” <em>Medicine &amp; Science in Sports &amp; Exercise</em> 41 (4): 780–87. <a href="https://doi.org/10.1249/MSS.0b013e31818f2bfa">https://doi.org/10.1249/MSS.0b013e31818f2bfa</a>.</p>
</div>
<div id="ref-R-bmbstats">
<p>Jovanović, Mladen. 2020a. <em>Bmbstats: Bootstrap Magnitude-Based Statistics</em>. <a href="https://github.com/mladenjovanovic/bmbstats">https://github.com/mladenjovanovic/bmbstats</a>.</p>
</div>
<div id="ref-jovanovicBmbstatsMagnitudebasedStatistics2020">
<p>———. 2020b. “Bmbstats: Magnitude-Based Statistics for Sports Scientists.” https://mladenjovanovic.github.io/bmbstats-book/. <a href="https://mladenjovanovic.github.io/bmbstats-book/">https://mladenjovanovic.github.io/bmbstats-book/</a>.</p>
</div>
<div id="ref-jovanovicUnderstandingForceVelocityCurve2018">
<p>———. 2018. “Understanding Force-Velocity Curve Using Simple Mechanical Model.” <em>Complementary Training</em>. <a href="https://complementarytraining.net/understanding-force-velocity-curve-using-simple-mechanical-model/">https://complementarytraining.net/understanding-force-velocity-curve-using-simple-mechanical-model/</a>.</p>
</div>
<div id="ref-jovanovicStatisticalModellingSports2019">
<p>———. 2019. “Statistical Modelling for Sports Scientists: Practical Introduction Using R (Part 1).” <em>SportRxiv</em>, September. <a href="https://doi.org/10.31236/osf.io/dnq3m">https://doi.org/10.31236/osf.io/dnq3m</a>.</p>
</div>
</div>
</div>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p>Removing weight is a bit trickier to be performed in real life settings, but in simulation it is no brainier. In real life, the weight is reduced by using some type of elastic resistance that pulls upward. Unfortunately, this only reduces bodyweight (i.e. force), but does not reduce mass or inertial.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>As explained in the previous vignettes, there is a difference in calculating mean GRF over time and over distance, since former uses work and latter uses impulse. You can check that by running <code>plot_profile(profile_data, "mean_GRF_over_distance", "mean_GRF_over_time") + geom_abline(slope = 1, linetype = "dashed")</code><a href="#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p>Please note that the peak velocity tends to be slightly higher than the take-off velocity, since there is some deceleration happening right before the take-off (see Simulation vignette for more info)<a href="#fnref3" class="footnote-back">↩︎</a></p></li>
<li id="fn4"><p><code>bmbstats</code> package and accompanying book are currently in development, but you can access them on GitHub: <a href="https://github.com/mladenjovanovic/bmbstats" class="uri">https://github.com/mladenjovanovic/bmbstats</a> and <a href="https://github.com/mladenjovanovic/bmbstats-book" class="uri">https://github.com/mladenjovanovic/bmbstats-book</a>. The <code>bmbstats</code> book can be read on the GitHub pages: <a href="https://mladenjovanovic.github.io/bmbstats-book/" class="uri">https://mladenjovanovic.github.io/bmbstats-book/</a><a href="#fnref4" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Mladen Jovanović.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
